{"map":{"version":3,"sources":["static/js/main.1ed9b9a8.chunk.js"],"names":["this","push","176","module","exports","__webpack_require__","350","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","redux","es","redux_thunk_es","objectSpread2","utility_updateObject","oldObject","updatedProperties","Object","initialState","token","username","error","loading","auth_authStart","state","action","auth_authSuccess","auth_authFail","auth_authLogout","auth","arguments","length","undefined","type","nav_initialState","showAddChatPopup","nav_openAddChatPopup","nav_closeAddChatPopup","nav","toConsumableArray","message_initialState","messages","chats","message_addMessage","concat","message","message_setMessages","reverse","message_setChats","reducers_message","classCallCheck","assertThisInitialized","createClass","createSuper","inherits","react_router_dom","react_router","hoc","props","children","websocket_WebSocketService","WebSocketService","callbacks","socketRef","key","value","instance","chatUrl","_this","path","console","log","WebSocket","onopen","onmessage","e","socketNewMessage","data","onerror","onclose","connect","close","parsedData","JSON","parse","command","keys","chatId","sendMessage","from","content","messagesCallback","newMessageCallback","send","stringify","err","readyState","websocket","getInstance","Chat_Chat","_React$Component","Chat","_super","call","messageChangeHandler","event","setState","target","sendMessageHandler","preventDefault","messageObject","match","params","chatID","newChatMessage","renderTimestamp","timestamp","timeDiff","Math","round","Date","getTime","renderMessages","currentUser","map","i","arr","a","createElement","id","style","marginBottom","className","author","src","scrollToBottom","messagesEnd","scrollIntoView","behavior","initialiseChat","_this2","waitForSocketConnection","fetchMessages","newProps","_this3","disconnect","callback","component","setTimeout","_this4","float","clear","ref","el","onSubmit","onChange","required","placeholder","aria-hidden","Component","containers_Chat","routes","exact","Icon","spin","axios","axios_default","actions_auth_authSuccess","actions_auth_authFail","auth_logout","localStorage","removeItem","checkAuthTimeout","expirationTime","dispatch","message_getUserChats","defaults","headers","Content-Type","Authorization","get","then","res","components_Contact","to","chatURL","color","picURL","alt","name","antIcon","fontSize","Sidepanel_Sidepanel","Sidepanel","_len","args","Array","_key","apply","loginForm","changeForm","authenticate","login","password","signup","email","password2","waitForAuthDetails","getUserChats","addChat","activeChats","c","status","indicator","isAuthenticated","onClick","logout","method","htmlFor","openAddChatPopup","containers_Sidepanel","userName","post","expirationDate","setItem","catch","auth_authLogin","password1","auth_authSignup","Profile_Profile","Profile","containers_Profile","modal","es_select","es_button","es_form","FormItem","Item","Form_HorizontalAddChatForm","HorizontalAddChatForm","usernames","handleChange","handleSubmit","form","validateFields","values","combined","participants","history","closeAddChatPopup","fieldsError","_this$props$form","getFieldDecorator","getFieldsError","getFieldError","userNameError","isFieldTouched","layout","validateStatus","help","rules","mode","width","htmlType","disabled","some","field","AddChatForm","create","Form","Popup","AddChatModal","centered","footer","visible","isVisible","onCancel","App_App","App","addCallbacks","setMessages","bind","addMessage","onTryAutoSignup","src_App","authenticated","getItem","actions_message_addMessage","actions_message_setMessages","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","src_store","rootReducer","configureStore","app","store","render","document","getElementById"],"mappings":"CAACA,KAA2B,qBAAIA,KAA2B,sBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAExEC,IACA,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAoB,MAK/BC,IACA,SAAUH,EAAQI,EAAqBF,GAE7C,aAEAA,EAAoBG,EAAED,GAGtB,IAAIE,EAAQJ,EAAoB,GAC5BK,EAA6BL,EAAoBM,EAAEF,GAGnDG,EAAYP,EAAoB,GAChCQ,EAAiCR,EAAoBM,EAAEC,GAGvDE,EAAQT,EAAoB,IAG5BU,EAAKV,EAAoB,IAGzBW,EAAiBX,EAAoB,KAQrCY,GALOZ,EAAoB,KAKXA,EAAoB,KAGpCa,EAAqB,SAAsBC,EAAUC,GAAmB,OAAOC,OAAOJ,EAA+B,EAAtCI,CAAyC,GAAGF,EAAU,GAAGC,IAExIE,EAAa,CAACC,MAAM,KAAKC,SAAS,KAAKC,MAAM,KAAKC,SAAQ,GAAWC,EAAe,SAAmBC,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACH,MAAM,KAAKC,SAAQ,KAAaI,EAAiB,SAAqBF,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACL,MAAMM,EAAON,MAAMC,SAASK,EAAOL,SAASC,MAAM,KAAKC,SAAQ,KAAcK,EAAc,SAAkBH,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACH,MAAMI,EAAOJ,MAAMC,SAAQ,KAAcM,EAAgB,SAAoBJ,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACL,MAAM,QAAodU,EAA1b,WAAmB,IAAIL,EAAMM,UAAUC,OAAO,QAAkBC,IAAfF,UAAU,GAAeA,UAAU,GAAGZ,EAAiBO,EAAOK,UAAUC,OAAO,EAAED,UAAU,QAAGE,EAAU,OAAOP,EAAOQ,MAAM,IAP7uB,aAO6vB,OAAOV,EAAeC,GAAc,IAPnwB,eAOqxB,OAAOE,EAAiBF,EAAMC,GAAQ,IAP9xB,YAO6yB,OAAOE,EAAcH,EAAMC,GAAQ,IAPpzB,cAOq0B,OAAOG,EAAgBJ,GAAc,QAAQ,OAAOA,IAE39BU,EAAiB,CAACC,kBAAiB,GACnCC,EAAqB,SAA0BZ,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACW,kBAAiB,KACjHE,EAAsB,SAA2Bb,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACW,kBAAiB,KAA4YG,EAAlX,WAAmB,IAAId,EAAMM,UAAUC,OAAO,QAAkBC,IAAfF,UAAU,GAAeA,UAAU,GAAGI,EAAqBT,EAAOK,UAAUC,OAAO,EAAED,UAAU,QAAGE,EAAU,OAAOP,EAAOQ,MAAM,IAXtL,sBAW+M,OAAOG,EAAqBZ,GAAc,IAX1M,uBAWoO,OAAOa,EAAsBb,GAAc,QAAQ,OAAOA,IAErde,EAAoBtC,EAAoB,IAGxCuC,EAAqB,CAACC,SAAS,GAAGC,MAAM,IAMxCC,EAAmB,SAAoBnB,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACiB,SAAS,GAAGG,OAAO3B,OAAOsB,EAAmC,EAA1CtB,CAA6CO,EAAMiB,UAAU,CAAChB,EAAOoB,aAChLC,EAAoB,SAAqBtB,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACiB,SAAShB,EAAOgB,SAASM,aAAkBC,EAAiB,SAAkBxB,EAAMC,GAAQ,OAAOX,EAAqBU,EAAM,CAACkB,MAAMjB,EAAOiB,SAA6bO,EAA/Z,WAAmB,IAAIzB,EAAMM,UAAUC,OAAO,QAAkBC,IAAfF,UAAU,GAAeA,UAAU,GAAGU,EAAyBf,EAAOK,UAAUC,OAAO,EAAED,UAAU,QAAGE,EAAU,OAAOP,EAAOQ,MAAM,IAvB3N,cAuB4O,OAAOU,EAAmBnB,EAAMC,GAAQ,IAvBrP,eAuBuQ,OAAOqB,EAAoBtB,EAAMC,GAAQ,IAvB3Q,oBAuBkS,OAAOuB,EAAiBxB,EAAMC,GAAQ,QAAQ,OAAOD,IAEznB0B,EAAiBjD,EAAoB,IAGrCkD,EAAwBlD,EAAoB,IAG5CmD,EAAcnD,EAAoB,IAGlCoD,EAAcpD,EAAoB,IAGlCqD,EAAWrD,EAAoB,IAG/BsD,EAAmBtD,EAAoB,IAGvCuD,EAAevD,EAAoB,IAG8CwD,EAA7E,SAAaC,GAAO,OAAOA,EAAMC,UAErCC,EAAwC,WACwG,SAASC,IAAmB5C,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAKiE,GAAkBjE,KAAKkE,UAAU,GAAGlE,KAAKmE,UAAU,KAyC9Q,OA1CmD9C,OAAOmC,EAA6B,EAApCnC,CAAuC4C,EAAiB,KAAK,CAAC,CAACG,IAAI,cAC1HC,MAAM,WAAwG,OAA7EJ,EAAiBK,WAAUL,EAAiBK,SAAS,IAAIL,GAA2BA,EAAiBK,aAAkJjD,OAAOmC,EAA6B,EAApCnC,CAAuC4C,EAAiB,CAAC,CAACG,IAAI,UAAUC,MAAM,SAAiBE,GAAS,IAAIC,EAAMxE,KAASyE,EAAK,+BAA+BzB,OAAOuB,EAAQ,KAAKG,QAAQC,IAAIF,GAAMzE,KAAKmE,UAAU,IAAIS,UAAUH,GAAMzE,KAAKmE,UAAUU,OAAO,WAAWH,QAAQC,IAAI,mBAG7iB3E,KAAKmE,UAAUW,UAAU,SAASC,GAClCP,EAAMQ,iBAAiBD,EAAEE,OAAQjF,KAAKmE,UAAUe,QAAQ,SAASH,GAAGL,QAAQC,IAAII,EAAE9B,UAAWjD,KAAKmE,UAAUgB,QAAQ,WAAWT,QAAQC,IAAI,uBAAuBH,EAAMY,aAAe,CAAChB,IAAI,aAAaC,MAAM,WAAsBrE,KAAKmE,UAAUkB,UAAW,CAACjB,IAAI,mBAAmBC,MAAM,SAA0BY,GACvT,IAAIK,EAAWC,KAAKC,MAAMP,GAItBQ,EAAQH,EAAWG,QACiB,IAArCpE,OAAOqE,KAAK1F,KAAKkE,WAAW/B,SAAiC,aAAVsD,GAAsBzF,KAAKkE,UAAUuB,GAASH,EAAWzC,UAAW6B,QAAQC,IAAI3E,MAAmB,gBAAVyF,GAC/IzF,KAAKkE,UAAUuB,GAASH,EAAWrC,SAAUyB,QAAQC,IAAI3E,SAEvD,CAACoE,IAAI,gBAAgBC,MAAM,SAAuB7C,EAASmE,GAAQ3F,KAAK4F,YAAY,CAACH,QAAQ,iBAAiBjE,SAASA,EAASmE,OAAOA,IAASjB,QAAQC,IAAIgB,GAAQjB,QAAQC,IAAInD,KAAa,CAAC4C,IAAI,iBAAiBC,MAAM,SAAwBpB,GAASjD,KAAK4F,YAAY,CAACH,QAAQ,cAAcI,KAAK5C,EAAQ4C,KAAK5C,QAAQA,EAAQ6C,QAAQH,OAAO1C,EAAQ0C,SAASjB,QAAQC,IAAI1B,KAEhX,CAACmB,IAAI,eAAeC,MAAM,SAAsB0B,EAAiBC,GAAoBhG,KAAKkE,UAAoB,SAAE6B,EAAiB/F,KAAKkE,UAAuB,YAAE8B,IAAsB,CAAC5B,IAAI,cAAcC,MAAM,SAAqBY,GAAM,IAAIjF,KAAKmE,UAAU8B,KAAKV,KAAKW,UAAU7E,OAAOJ,EAA+B,EAAtCI,CAAyC,GAAG4D,KAAS,MAAMkB,GAAKzB,QAAQC,IAAIwB,EAAIlD,YAAa,CAACmB,IAAI,QAAQC,MAAM,WAAiB,OAAOrE,KAAKmE,UAAUiC,eA0B9ZnC,EA1CiC,GA2C5CD,EAA2BM,SAAS,KAAK,IAAgG+B,EAA1ErC,EAA2BsC,cAItFC,EAAuB,SAASC,GAAkBnF,OAAOqC,EAA0B,EAAjCrC,CAAoCoF,EAAKD,GAAkB,IAAIE,EAAOrF,OAAOoC,EAA6B,EAApCpC,CAAuCoF,GAa5G,SAASA,EAAK3C,GAAO,IAAIU,EAOia,OAP3ZnD,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAKyG,IACrIjC,EAAMkC,EAAOC,KAAK3G,KAAK8D,IAAalC,MAAM,CAACiB,SAAS,IAAI2B,EAAMoC,qBAAqB,SAASC,GAAOrC,EAAMsC,SAAS,CAAC7D,QAAQ4D,EAAME,OAAO1C,SAAUG,EAAMwC,mBAAmB,SAASjC,GAAGA,EAAEkC,iBAAiB,IAAIC,EAAc,CAACrB,KAAKrB,EAAMV,MAAMtC,SAASsE,QAAQtB,EAAM5C,MAAMqB,QAAQ0C,OAAOnB,EAAMV,MAAMqD,MAAMC,OAAOC,QAAQhB,EAAUiB,eAAeJ,GAAe1C,EAAMsC,SAAS,CAAC7D,QAAQ,MAAOuB,EAAM+C,gBAAgB,SAASC,GAAW,IAAkBC,EAASC,KAAKC,QAAO,IAAIC,MAAOC,UAAU,IAAID,KAAKJ,GAAWK,WAAW,KAI/Z,OAJyaJ,EAAS,EACnhB,cAAuBA,EAAS,IAAIA,EAAS,EAC7C,GAAGzE,OAAOyE,EAAS,gBAAyBA,EAAS,MAAOA,EAAS,GACrE,GAAGzE,OAAO0E,KAAKC,MAAMF,EAAS,IAAI,cAAuBA,EAAS,OAAUA,EAAS,KACrF,GAAGzE,OAAO0E,KAAKC,MAAMF,EAAS,MAAS,aAA0B,GAAGzE,OAAO,IAAI4E,KAAKJ,KAA6BhD,EAAMsD,eAAe,SAASjF,GAAU,IAAIkF,EAAYvD,EAAMV,MAAMtC,SAAS,OAAOqB,EAASmF,KAAI,SAAS/E,EAAQgF,EAAEC,GAAK,OAAmBxH,EAAcyH,EAAEC,cAAc,KAAK,CACvShE,IAAInB,EAAQoF,GAAGC,MAAM,CAACC,aAAaL,EAAI/F,OAAO,IAAI8F,EAAE,QAAQ,QAC3DO,UAAUvF,EAAQwF,SAASV,EAAY,UAAU,QAAqBrH,EAAcyH,EAAEC,cAAc,MAAM,CAACM,IAAI,+CAA4DhI,EAAcyH,EAAEC,cAAc,IAAI,KAAKnF,EAAQ6C,QAAqBpF,EAAcyH,EAAEC,cAAc,KAAK,MAAmB1H,EAAcyH,EAAEC,cAAc,QAAQ,KAAK5D,EAAM+C,gBAAgBtE,EAAQuE,kBAAmBhD,EAAMmE,eAAe,WAAWnE,EAAMoE,YAAYC,eAAe,CAACC,SAAS,YAAatE,EAAMuE,iBAAwBvE,EAmB8mB,OAvC77BnD,OAAOmC,EAA6B,EAApCnC,CAAuCoF,EAAK,CAAC,CAACrC,IAAI,iBAC3NC,MAAM,WAA0B,IAAI2E,EAAOhJ,KAAKA,KAAKiJ,yBAAwB,WAW7E5C,EAAU6C,cAAcF,EAAOlF,MAAMtC,SAASwH,EAAOlF,MAAMqD,MAAMC,OAAOC,WACxEhB,EAAUjB,QAAQpF,KAAK8D,MAAMqD,MAAMC,OAAOC,YAOqdhG,OAAOmC,EAA6B,EAApCnC,CAAuCoF,EAAK,CAAC,CAACrC,IAAI,4BAA4BC,MAAM,SAAmC8E,GAAU,IAAIC,EAAOpJ,KAAK0E,QAAQC,IAAIwE,GAMzpBnJ,KAAK8D,MAAMqD,MAAMC,OAAOC,SAAS8B,EAAShC,MAAMC,OAAOC,SAAQhB,EAAUgD,aAAarJ,KAAKiJ,yBAAwB,WAAW5C,EAAU6C,cAAcE,EAAOtF,MAAMtC,SAAS2H,EAAShC,MAAMC,OAAOC,WAAWhB,EAAUjB,QAAQ+D,EAAShC,MAAMC,OAAOC,WAGtP,CAACjD,IAAI,0BAA0BC,MAAM,SAAiCiF,GAAU,IAAIC,EAAUvJ,KAGhGwJ,YACA,WAAW,GAAuB,IAApBnD,EAAUzE,QAGxB,OAHqC8C,QAAQC,IAAI,6BAEjD2E,IACa5E,QAAQC,IAAI,6BAA6B4E,EAAUN,wBAAwBK,KACtF,OAAQ,CAAClF,IAAI,oBAAoBC,MAAM,WAA6BrE,KAAK2I,mBAAoB,CAACvE,IAAI,qBAAqBC,MAAM,WAA8BrE,KAAK2I,mBAAoB,CAACvE,IAAI,SAASC,MAAM,WAAkB,IAAIoF,EAAOzJ,KAAkBA,KAAK4B,MAAMiB,SAAS,OAE7QnC,EAAcyH,EAAEC,cAAc,MAAM,KAAkB1H,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,YAAyB9H,EAAcyH,EAAEC,cAAc,KAAK,CAACC,GAAG,YAAYrI,KAAK8D,MAAMjB,UAAU7C,KAAK8H,eAAe9H,KAAK8D,MAAMjB,UAAuBnC,EAAcyH,EAAEC,cAAc,MAAM,CAACE,MAAM,CAACoB,MAAM,OAAOC,MAAM,QAAQC,IAAI,SAAaC,GAAIJ,EAAOb,YAAYiB,OAAsBnJ,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,iBAA8B9H,EAAcyH,EAAEC,cAAc,OAAO,CAAC0B,SAAS9J,KAAKgH,oBAAiCtG,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB9H,EAAcyH,EAAEC,cAAc,QAAQ,CAAC2B,SAAS/J,KAAK4G,qBAAqBvC,MAAMrE,KAAK4B,MAAMqB,SAAS,GAAG+G,UAAS,EAAK3B,GAAG,qBAAqBhG,KAAK,OAAO4H,YAAY,0BAAuCvJ,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,6BAA6B0B,cAAc,SAAsBxJ,EAAcyH,EAAEC,cAAc,SAAS,CAACC,GAAG,sBAAsBG,UAAU,UAAuB9H,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,oBAAoB0B,cAAc,kBAA2BzD,EAvCllC,CAuCylC/F,EAAcyH,EAAEgC,WACx+BC,EAAmB/I,OAAON,EAAoB,EAA3BM,EAA3J,SAAyBO,GAAO,MAAM,CAACJ,SAASI,EAAMK,KAAKT,SAASqB,SAASjB,EAAMqB,QAAQJ,YAA+D,CAAgD0D,GAIhB8D,EAFxL,WAAsB,OAE5C3J,EAAcyH,EAAEC,cAAcvE,EAAI,KAAkBnD,EAAcyH,EAAEC,cAAcxE,EAA4B,EAAE,CAAC0G,OAAM,EAAK7F,KAAK,YAAY8E,UAAUa,MAEnJG,EAAOlK,EAAoB,KAG3BmK,EAAOnK,EAAoB,KAG3BoK,EAAQpK,EAAoB,IAC5BqK,EAA6BrK,EAAoBM,EAAE8J,GAGuBE,EAAyB,SAAqBnJ,EAASD,GAAO,MAAM,CAACc,KAvJtG,eAuJwHd,MAAMA,EAAMC,SAASA,IAAgBoJ,EAAsB,SAAkBnJ,GAAO,MAAM,CAACY,KAvJtL,YAuJqMZ,MAAMA,IAAaoJ,EAAY,WAAiI,OAA/GC,aAAaC,WAAW,SAASD,aAAaC,WAAW,YAAYD,aAAaC,WAAW,kBAAwB,CAAC1I,KAvJhV,gBAuJwW2I,EAAiB,SAA0BC,GAAgB,OAAO,SAASC,GAAU1B,YAAW,WAAW0B,EAASL,OAAgC,IAAfI,KAc1QE,EAAqB,SAAsB3J,EAASD,GAAO,OAAO,SAAS2J,GAAUR,EAAcvC,EAAEiD,SAASC,QAAQ,CAACC,eAAe,mBAAmBC,cAAc,SAASvI,OAAOzB,IAAQmJ,EAAcvC,EAAEqD,IAAI,wCAAwCxI,OAAOxB,IAAWiK,MAAK,SAASC,GAAK,OAAOR,EAAlV,CAAC7I,KArKO,oBAqKgBS,MAA+V4I,EAAIzG,YAEC0G,EAAtoB,SAAiB7H,GAAO,OAAmBpD,EAAcyH,EAAEC,cAAczE,EAAkC,EAAE,CAACiI,GAAG,GAAG5I,OAAOc,EAAM+H,SAASvD,MAAM,CAACwD,MAAM,SAAsBpL,EAAcyH,EAAEC,cAAc,KAAK,CAACI,UAAU,WAAwB9H,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB9H,EAAcyH,EAAEC,cAAc,OAAO,CAACI,UAAU,0BAAuC9H,EAAcyH,EAAEC,cAAc,MAAM,CAACM,IAAI5E,EAAMiI,OAAOC,IAAI,KAAkBtL,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB9H,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,QAAQ1E,EAAMmI,WAEzmBC,EAAqBxL,EAAcyH,EAAEC,cAAcmC,EAAsB,EAAE,CAAClI,KAAK,UAAUiG,MAAM,CAAC6D,SAAS,IAAI3B,MAAK,IAAW4B,EAAiC,SAAS5F,GAAkBnF,OAAOqC,EAA0B,EAAjCrC,CAAoCgL,EAAU7F,GAAkB,IAAIE,EAAOrF,OAAOoC,EAA6B,EAApCpC,CAAuCgL,GAAW,SAASA,IAAY,IAAI7H,EAAMnD,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAKqM,GAAW,IAAI,IAAIC,EAAKpK,UAAUC,OAAOoK,EAAK,IAAIC,MAAMF,GAAMG,EAAK,EAAEA,EAAKH,EAAKG,IAAQF,EAAKE,GAAMvK,UAAUuK,GAA6f,OAAtfjI,EAAMkC,EAAOC,KAAK+F,MAAMhG,EAAO,CAAC1G,MAAMgD,OAAOuJ,KAAa3K,MAAM,CAAC+K,WAAU,GAAMnI,EAAMoI,WAAW,WAAWpI,EAAMsC,SAAS,CAAC6F,WAAWnI,EAAM5C,MAAM+K,aAAcnI,EAAMqI,aAAa,SAAS9H,GAAGA,EAAEkC,iBAAoBzC,EAAM5C,MAAM+K,WAAWnI,EAAMV,MAAMgJ,MAAM/H,EAAEgC,OAAOvF,SAAS6C,MAAMU,EAAEgC,OAAOgG,SAAS1I,OAAOK,QAAQC,IAAII,EAAEgC,OAAOvF,SAAS6C,OAAOK,QAAQC,IAAII,EAAEgC,OAAOgG,SAAS1I,QAAaG,EAAMV,MAAMkJ,OAAOjI,EAAEgC,OAAOvF,SAAS6C,MAAMU,EAAEgC,OAAOkG,MAAM5I,MAAMU,EAAEgC,OAAOgG,SAAS1I,MAAMU,EAAEgC,OAAOmG,UAAU7I,QAAiBG,EAO2sG,OAPpsGnD,OAAOmC,EAA6B,EAApCnC,CAAuCgL,EAAU,CAAC,CAACjI,IAAI,qBAAqBC,MAAM,WAA8B,IAAIkF,EAAUvJ,KAAKwJ,YAAW,WAIvnC,OAAxBD,EAAUzF,MAAMvC,YAAsCa,IAAxBmH,EAAUzF,MAAMvC,OAA6GmD,QAAQC,IAAI,yCACvK4E,EAAU4D,sBADuD5D,EAAUzF,MAAMsJ,aAAa7D,EAAUzF,MAAMtC,SAAS+H,EAAUzF,MAAMvC,SACrG,OAAQ,CAAC6C,IAAI,oBAAoBC,MAAM,WACzErE,KAAKmN,uBAAwB,CAAC/I,IAAI,mBAAmBC,MAAM,WAA4BrE,KAAK8D,MAAMuJ,YAAa,CAACjJ,IAAI,SAASC,MAAM,WAAkB,IAAI2E,EAAOhJ,KAASsN,EAAYtN,KAAK8D,MAAMhB,MAAMkF,KAAI,SAASuF,GACnN,OAAmB7M,EAAcyH,EAAEC,cAAcuD,EAAmB,CAACvH,IAAImJ,EAAElF,GAAG4D,KAAK,iBAAiBF,OAAO,8CAA8CyB,OAAO,OAAO3B,QAAQ,IAAI7I,OAAOuK,EAAElF,SAAS,OAAmB3H,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,aAA0B3H,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,WAAwB3H,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB9H,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,cAAcK,IAAI,6CAA6CF,UAAU,SAASwD,IAAI,KAAkBtL,EAAcyH,EAAEC,cAAc,IAAI,KAAK,aAA0B1H,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,mCAAmC0B,cAAc,SAAsBxJ,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,kBAA+B3H,EAAcyH,EAAEC,cAAc,KAAK,KAAkB1H,EAAcyH,EAAEC,cAAc,KAAK,CAACC,GAAG,gBAAgBG,UAAU,UAAuB9H,EAAcyH,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB9H,EAAcyH,EAAEC,cAAc,IAAI,KAAK,WAAwB1H,EAAcyH,EAAEC,cAAc,KAAK,CAACC,GAAG,eAA4B3H,EAAcyH,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB9H,EAAcyH,EAAEC,cAAc,IAAI,KAAK,SAAsB1H,EAAcyH,EAAEC,cAAc,KAAK,CAACC,GAAG,eAA4B3H,EAAcyH,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB9H,EAAcyH,EAAEC,cAAc,IAAI,KAAK,SAAsB1H,EAAcyH,EAAEC,cAAc,KAAK,CAACC,GAAG,kBAA+B3H,EAAcyH,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB9H,EAAcyH,EAAEC,cAAc,IAAI,KAAK,cAA2B1H,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,YAAYrI,KAAK8D,MAAMpC,QAAqBhB,EAAcyH,EAAEC,cAAcoC,EAAsB,EAAE,CAACiD,UAAUvB,IAAUlM,KAAK8D,MAAM4J,gBAA6BhN,EAAcyH,EAAEC,cAAc,SAAS,CAACuF,QAAQ,WAAmB,OAAO3E,EAAOlF,MAAM8J,UAAWpF,UAAU,WAAwB9H,EAAcyH,EAAEC,cAAc,OAAO,KAAK,WAAwB1H,EAAcyH,EAAEC,cAAc,MAAM,KAAkB1H,EAAcyH,EAAEC,cAAc,OAAO,CAACyF,OAAO,OAAO/D,SAAS9J,KAAK6M,cAAc7M,KAAK4B,MAAM+K,UAAuBjM,EAAcyH,EAAEC,cAAc,MAAM,KAAkB1H,EAAcyH,EAAEC,cAAc,QAAQ,CAAC6D,KAAK,WAAW5J,KAAK,OAAO4H,YAAY,aAA0BvJ,EAAcyH,EAAEC,cAAc,QAAQ,CAAC6D,KAAK,WAAW5J,KAAK,WAAW4H,YAAY,cAA2BvJ,EAAcyH,EAAEC,cAAc,MAAM,KAAkB1H,EAAcyH,EAAEC,cAAc,QAAQ,CAAC6D,KAAK,WAAW5J,KAAK,OAAO4H,YAAY,aAA0BvJ,EAAcyH,EAAEC,cAAc,QAAQ,CAAC6D,KAAK,QAAQ5J,KAAK,QAAQ4H,YAAY,UAAuBvJ,EAAcyH,EAAEC,cAAc,QAAQ,CAAC6D,KAAK,WAAW5J,KAAK,WAAW4H,YAAY,aAA0BvJ,EAAcyH,EAAEC,cAAc,QAAQ,CAAC6D,KAAK,YAAY5J,KAAK,WAAW4H,YAAY,sBAAmCvJ,EAAcyH,EAAEC,cAAc,SAAS,CAAC/F,KAAK,UAAU,iBAA8B3B,EAAcyH,EAAEC,cAAc,SAAS,CAACuF,QAAQ3N,KAAK4M,YAAY,cAA2BlM,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,UAAuB3H,EAAcyH,EAAEC,cAAc,QAAQ,CAAC0F,QAAQ,IAAiBpN,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,eAAe0B,cAAc,UAAuBxJ,EAAcyH,EAAEC,cAAc,QAAQ,CAAC/F,KAAK,OAAO4H,YAAY,wBAAqCvJ,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,YAAyB3H,EAAcyH,EAAEC,cAAc,KAAK,KAAKkF,IAA2B5M,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,cAA2B3H,EAAcyH,EAAEC,cAAc,SAAS,CAACC,GAAG,aAAasF,QAAQ,WAAmB,OAAO3E,EAAO+E,qBAAmCrN,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,wBAAwB0B,cAAc,SAAsBxJ,EAAcyH,EAAEC,cAAc,OAAO,KAAK,aAA0B1H,EAAcyH,EAAEC,cAAc,SAAS,CAACC,GAAG,YAAyB3H,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,kBAAkB0B,cAAc,SAAsBxJ,EAAcyH,EAAEC,cAAc,OAAO,KAAK,mBAA2BiE,EAPxiI,CAOojI3L,EAAcyH,EAAEgC,WACxoH6D,EAAwB3M,OAAON,EAAoB,EAA3BM,EADypH,SAAyBO,GAAO,MAAM,CAAC8L,gBAAmC,OAAnB9L,EAAMK,KAAKV,MAAaG,QAAQE,EAAMK,KAAKP,QAAQH,MAAMK,EAAMK,KAAKV,MAAMC,SAASI,EAAMK,KAAKT,SACt6IsB,MAAMlB,EAAMqB,QAAQH,UAA0C,SAA4BoI,GAAU,MAAM,CAAC4B,MAAM,SAAemB,EAASlB,GAAU,OAAO7B,EA1Bqe,SAAmB1J,EAASuL,GAAU,OAAO,SAAS7B,GAAUA,EAAzoB,CAAC7I,KAvJxC,eAwJfqI,EAAcvC,EAAE+F,KAAK,yCAAyC,CAAC1M,SAASA,EAASuL,SAASA,IAAWtB,MAAK,SAASC,GAAK,IAAInK,EAAMmK,EAAIzG,KAAKb,IAAQ+J,EAAe,IAAIvG,MAAK,IAAIA,MAAOC,UAAU,MAAWiD,aAAasD,QAAQ,QAAQ7M,GAAOuJ,aAAasD,QAAQ,WAAW5M,GAAUsJ,aAAasD,QAAQ,iBAAiBD,GAAgBjD,EAASP,EAAyBnJ,EAASD,IAAQ2J,EAASF,EAAiB,UAAUqD,OAAM,SAASlI,GAAK+E,EAASN,EAAsBzE,QAyBtTmI,CAAeL,EAASlB,KAAaa,OAAO,WAAkB,OAAO1C,EAASL,MAAiBmC,OAAO,SAAgBxL,EAASyL,EAAMsB,EAAUrB,GAAW,OAAOhC,EAzBsL,SAAoB1J,EAASyL,EAAMsB,EAAUrB,GAAW,OAAO,SAAShC,GAAUA,EADthB,CAAC7I,KAvJxC,eAwJgmBqI,EAAcvC,EAAE+F,KAAK,gDAAgD,CAAC1M,SAASA,EAASyL,MAAMA,EAAMsB,UAAUA,EAAUrB,UAAUA,IAAYzB,MAAK,SAASC,GAAK,IAAInK,EAAMmK,EAAIzG,KAAKb,IAAQ+J,EAAe,IAAIvG,MAAK,IAAIA,MAAOC,UAAU,MAAWiD,aAAasD,QAAQ,QAAQ7M,GAAOuJ,aAAasD,QAAQ,WAAW5M,GAAUsJ,aAAasD,QAAQ,iBAAiBD,GAAgBjD,EAASP,EAAyBnJ,EAASD,IAAQ2J,EAASF,EAAiB,UAAUqD,OAAM,SAASlI,GAAK+E,EAASN,EAAsBzE,QAyBpyBqI,CAAgBhN,EAASyL,EAAMsB,EAAUrB,KAAcG,QAAQ,WAAmB,OAAOnC,EAvBnW,CAAC7I,KA1JwE,yBAiLqU+K,aAAa,SAAsB5L,EAASD,GAAO,OAAO2J,EAASC,EAAqB3J,EAASD,QAAqE,CAAuF6K,GAE1sBqC,GAA6B,SAASjI,GAAkBnF,OAAOqC,EAA0B,EAAjCrC,CAAoCqN,EAAQlI,GAAkB,IAAIE,EAAOrF,OAAOoC,EAA6B,EAApCpC,CAAuCqN,GAAS,SAASA,IAAkE,OAAxDrN,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAK0O,GAAgBhI,EAAOgG,MAAM1M,KAAKkC,WAGiiB,OAHrhBb,OAAOmC,EAA6B,EAApCnC,CAAuCqN,EAAQ,CAAC,CAACtK,IAAI,SAASC,MAAM,WAAkB,OAAsB,OAAnBrE,KAAK8D,MAAMvC,MAGtXb,EAAcyH,EAAEC,cAAcxE,EAA+B,EAAE,CAACgI,GAAG,MAA0BlL,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,mBAAyC,OAAtBxI,KAAK8D,MAAMtC,SAA6Bd,EAAcyH,EAAEC,cAAcvE,EAAI,KAAkBnD,EAAcyH,EAAEC,cAAc,MAAM,CAACM,IAAI,kDAAkDsD,IAAI,KAAkBtL,EAAcyH,EAAEC,cAAc,IAAI,KAAKpI,KAAK8D,MAAMtC,UAAuBd,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,gBAA6B9H,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,iBAAiB0B,cAAc,SAAsBxJ,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,gBAAgB0B,cAAc,SAAsBxJ,EAAcyH,EAAEC,cAAc,IAAI,CAACI,UAAU,kBAAkB0B,cAAc,WAAW,UAAkBwE,EAHhyB,CAG0yBhO,EAAcyH,EAAEgC,WAChyBwE,GAAsBtN,OAAON,EAAoB,EAA3BM,EADizB,SAAyBO,GAAO,MAAM,CAACJ,SAASI,EAAMK,KAAKT,SAC77BD,MAAMK,EAAMK,KAAKV,SAA+D,CAAwDkN,IAEpIG,GAAQvO,EAAoB,KAG5BwO,GAAYxO,EAAoB,KAGhCyO,GAAYzO,EAAoB,IAGhC0O,GAAU1O,EAAoB,KAG9B2O,GAASD,GAAyB,EAAEE,KAAwH,IAAIC,GAAwC,SAAS1I,GAAkBnF,OAAOqC,EAA0B,EAAjCrC,CAAoC8N,EAAsB3I,GAAkB,IAAIE,EAAOrF,OAAOoC,EAA6B,EAApCpC,CAAuC8N,GAAuB,SAASA,IAAwB,IAAI3K,EAAMnD,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAKmP,GAAuB,IAAI,IAAI7C,EAAKpK,UAAUC,OAAOoK,EAAK,IAAIC,MAAMF,GAAMG,EAAK,EAAEA,EAAKH,EAAKG,IAAQF,EAAKE,GAAMvK,UAAUuK,GAYthB,OAZ6hBjI,EAAMkC,EAAOC,KAAK+F,MAAMhG,EAAO,CAAC1G,MAAMgD,OAAOuJ,KAAa3K,MAAM,CAACwN,UAAU,GAAG3N,MAAM,MAAM+C,EAAM6K,aAAa,SAAShL,GAAOG,EAAMsC,SAAS,CAACsI,UAAU/K,KAAUG,EAAM8K,aAAa,SAASvK,GAClxB,IAAIqK,EAAU5K,EAAM5C,MAAMwN,UAAUrK,EAAEkC,iBAAiBzC,EAAMV,MAAMyL,KAAKC,gBAAe,SAASrJ,EAAIsJ,GAAQ,IAAItJ,EAAI,CACpH,IAAIuJ,EAAS,GAAG1M,OAAO3B,OAAOsB,EAAmC,EAA1CtB,CAA6C+N,GAAW,CAAC5K,EAAMV,MAAMtC,WAAWkD,QAAQC,IAAI+K,GAAUhF,EAAcvC,EAAEiD,SAASC,QAAQ,CAACC,eAAe,mBAAmBC,cAAc,SAASvI,OAAOwB,EAAMV,MAAMvC,QAAQmJ,EAAcvC,EAAE+F,KAAK,qCAAqC,CAACrL,SAAS,GAAG8M,aAAaD,IAAWjE,MAAK,SAASC,GAKhWlH,EAAMV,MAAM8L,QAAQ3P,KAAK,IAAI+C,OAAO0I,EAAIzG,KAAKoD,KAE7C7D,EAAMV,MAAM+L,oBAEZrL,EAAMV,MAAMsJ,aAAa5I,EAAMV,MAAMtC,SAASgD,EAAMV,MAAMvC,UAAU8M,OAAM,SAASlI,GACnFzB,QAAQjD,MAAM0E,GAAK3B,EAAMsC,SAAS,CAACrF,MAAM0E,YAAsB3B,EAGwT,OAHjTnD,OAAOmC,EAA6B,EAApCnC,CAAuC8N,EAAsB,CAAC,CAAC/K,IAAI,oBACzIC,MAAM,WAA6BrE,KAAK8D,MAAMyL,KAAKC,mBAAoB,CAACpL,IAAI,SAASC,MAAM,WAAkB,IAb7CyL,EAaiDC,EAAiB/P,KAAK8D,MAAMyL,KAAKS,EAAkBD,EAAiBC,kBAAkBC,EAAeF,EAAiBE,eAAeC,EAAcH,EAAiBG,cACjRC,GAAcC,EADgSL,EAAiBK,gBAClS,aAAaF,EAAc,YAAY,OAAmBxP,EAAcyH,EAAEC,cAAc2G,GAAyB,EAAE,CAACsB,OAAO,SAASvG,SAAS9J,KAAKsP,cAActP,KAAK4B,MAAMH,MAAM,GAAGuB,OAAOhD,KAAK4B,MAAMH,OAAO,KAAkBf,EAAcyH,EAAEC,cAAc4G,GAAS,CAACsB,eAAeH,EAAc,QAAQ,GAAGI,KAAKJ,GAAe,IAAIH,EAAkB,WAAW,CAACQ,MAAM,CAAC,CAACxG,UAAS,EAAK/G,QAAQ,mEAA5D+M,CACxWtP,EAAcyH,EAAEC,cAAcyG,GAA2B,EAAE,CAAC4B,KAAK,OAAOnI,MAAM,CAACoI,MAAM,QAAQzG,YAAY,YAAYF,SAAS/J,KAAKqP,cAAc,MAAmB3O,EAAcyH,EAAEC,cAAc4G,GAAS,KAAkBtO,EAAcyH,EAAEC,cAAc0G,GAA2B,EAAE,CAACzM,KAAK,UAAUsO,SAAS,SAASC,UAf1Pd,EAe6QG,IAfzP5O,OAAOqE,KAAKoK,GAAae,MAAK,SAASC,GAAO,OAAOhB,EAAYgB,QAe2M,sBAA8B3B,EAflL,CAe0MzO,EAAcyH,EAAEgC,WAAe4G,GAAYhC,GAAyB,EAAEiC,QAA3BjC,CAAoCG,IACtV+B,GAAQ5P,OAAOuC,EAAiC,EAAzC,CAA4CvC,OAAON,EAAoB,EAA3BM,EADwV,SAAyBO,GAAO,MAAM,CAACL,MAAMK,EAAMK,KAAKV,MAAMC,SAASI,EAAMK,KAAKT,aAAwC,SAA4B0J,GAAU,MAAM,CAAC2E,kBAAkB,WAA6B,OAAO3E,EA1DllB,CAAC7I,KA1JqB,0BAqN3L+K,aAAa,SAAsB5L,EAASD,GAAO,OAAO2J,EAASC,EAAqB3J,EAASD,QAAiGF,CAA4E0P,KAGgdG,GAA1rB,SAAS1K,GAAkBnF,OAAOqC,EAA0B,EAAjCrC,CAAoC8P,EAAa3K,GAAkB,IAAIE,EAAOrF,OAAOoC,EAA6B,EAApCpC,CAAuC8P,GAAc,SAASA,IAA4E,OAA7D9P,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAKmR,GAAqBzK,EAAOgG,MAAM1M,KAAKkC,WAA4V,OAAhVb,OAAOmC,EAA6B,EAApCnC,CAAuC8P,EAAa,CAAC,CAAC/M,IAAI,SAASC,MAAM,WAA8C,OAA5BK,QAAQC,IAAI,gBAAmCjE,EAAcyH,EAAEC,cAAcwG,GAAuB,EAAE,CAACwC,UAAS,EAAKC,OAAO,KAAKC,QAAQtR,KAAK8D,MAAMyN,UAAUC,SAASxR,KAAK8D,MAAMuB,OAAoB3E,EAAcyH,EAAEC,cAAc6I,GAAK,WAAmBE,EAA/mB,CAA8nBzQ,EAAcyH,EAAEgC,WAE9qBsH,GAAqB,SAASjL,GAAkBnF,OAAOqC,EAA0B,EAAjCrC,CAAoCqQ,EAAIlL,GAAkB,IAAIE,EAAOrF,OAAOoC,EAA6B,EAApCpC,CAAuCqQ,GAA+I,SAASA,EAAI5N,GAAO,IAAIU,EAA2R,OAArRnD,OAAOiC,EAAgC,EAAvCjC,CAA0CrB,KAAK0R,GAAKlN,EAAMkC,EAAOC,KAAK3G,KAAK8D,GAAOuC,EAAUsL,aAAanN,EAAMV,MAAM8N,YAAYC,KAAKxQ,OAAOkC,EAAuC,EAA9ClC,CAAiDmD,IAAQA,EAAMV,MAAMgO,WAAWD,KAAKxQ,OAAOkC,EAAuC,EAA9ClC,CAAiDmD,KAAgBA,EAAmrB,OAAvnCnD,OAAOmC,EAA6B,EAApCnC,CAAuCqQ,EAAI,CAAC,CAACtN,IAAI,oBAAoBC,MAAM,WAA6BrE,KAAK8D,MAAMiO,sBAAwV1Q,OAAOmC,EAA6B,EAApCnC,CAAuCqQ,EAAI,CAAC,CAACtN,IAAI,SAASC,MAAM,WAAkB,IAAI2E,EAAOhJ,KAAK,OAAmBU,EAAcyH,EAAEC,cAAczE,EAAwC,EAAE,KAAkBjD,EAAcyH,EAAEC,cAAc,MAAM,CAACC,GAAG,SAAsB3H,EAAcyH,EAAEC,cAAc4F,EAAqB,MAAmBtN,EAAcyH,EAAEC,cAAc,MAAM,CAACI,UAAU,WAAwB9H,EAAcyH,EAAEC,cAAc8I,GAAM,CAACK,UAAUvR,KAAK8D,MAAMvB,iBAAiB8C,MAAM,WAAiB,OAAO2D,EAAOlF,MAAM+L,uBAAqCnP,EAAcyH,EAAEC,cAAcuG,GAAmB,MAAmBjO,EAAcyH,EAAEC,cAAciC,EAAO,aAAqBqH,EAA1wC,CAAgxChR,EAAcyH,EAAEgC,WAC15B6H,GAAW3Q,OAAON,EAAoB,EAA3BM,EADk7B,SAAyBO,GAAO,MAAM,CAACW,iBAAiBX,EAAMc,IAAIH,iBAAiB0P,cAAcrQ,EAAMK,KAAKV,UAAoC,SAA4B2J,GACxgD,MAAM,CAAC6G,gBAAgB,WAA2B,OAAO7G,GAnEynC,SAASA,GAAU,IAAI3J,EAAMuJ,aAAaoH,QAAQ,SAAa1Q,EAASsJ,aAAaoH,QAAQ,YAAY,QAAW9P,IAARb,EAAmB2J,EAASL,SAAoB,CAAC,IAAIsD,EAAe,IAAIvG,KAAKkD,aAAaoH,QAAQ,mBAAsB/D,GAAgB,IAAIvG,KAAQsD,EAASL,MAAqBK,EAASP,EAAyBnJ,EAASD,IAAQ2J,EAASF,GAAkBmD,EAAetG,WAAU,IAAID,MAAOC,WAAW,YAmEv/CgI,kBAAkB,WAA6B,OAAO3E,EAjEyB,CAAC7I,KA1JqB,0BA2NHyP,WAAW,SAAoB7O,GAAS,OAAOiI,EAtDxM,SAAoBjI,GAAS,MAAM,CAACZ,KArK+J,cAqK9IY,QAAQA,GAsDoJkP,CAA2BlP,KAAY2O,YAAY,SAAqB/O,GAAU,OAAOqI,EAtDlM,SAAqBrI,GAAU,MAAM,CAACR,KArKoF,eAqKlEQ,SAASA,GAsD0IuP,CAA4BvP,QAA2D,CAA2E4O,IAIhfY,GAAiBC,OAAOC,sCAAsCzR,EAAuB,EAO3E,IAAI0R,GAPyE,WAA0B,IAAIC,EAAYpR,OAAOP,EAA+B,EAAtCO,CAAyC,CAACY,KAAKA,EAAKS,IAAIA,EAAIO,QAAQI,IAOzM,OAPsOhC,OAAOP,EAA2B,EAAlCO,CACtOoR,EAAYJ,GAAiBhR,OAAOP,EAA+B,EAAtCO,CAAyCL,EAAgC,KAM1E0R,GAAqBC,GAAiBjS,EAAcyH,EAAEC,cAAcrH,EAAqB,EAAE,CAAC6R,MAAMJ,IAAwB9R,EAAcyH,EAAEC,cAAc4J,GAAQ,OAAOnR,EAAkBsH,EAAE0K,OAAOF,GAAIG,SAASC,eAAe,UAIxP,CAAC,CAAC,IAAI,EAAE"},"code":"(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{176:function(e,t,a){e.exports=a(350)},350:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),r=a(4),o=a.n(r),c=a(52),l=a(24),i=a(150),u=(a(185),a(94)),m=function(e,t){return Object(u.a)({},e,{},t)},p={token:null,username:null,error:null,loading:!1},h=function(e,t){return m(e,{error:null,loading:!0})},d=function(e,t){return m(e,{token:t.token,username:t.username,error:null,loading:!1})},f=function(e,t){return m(e,{error:t.error,loading:!1})},g=function(e,t){return m(e,{token:null})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"AUTH_START\":return h(e);case\"AUTH_SUCCESS\":return d(e,t);case\"AUTH_FAIL\":return f(e,t);case\"AUTH_LOGOUT\":return g(e);default:return e}},v={showAddChatPopup:!1},b=function(e,t){return m(e,{showAddChatPopup:!0})},k=function(e,t){return m(e,{showAddChatPopup:!1})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"OPEN_AND_CHAT_POPUP\":return b(e);case\"CLOSE_ADD_CHAT_POPUP\":return k(e);default:return e}},w=a(93),S={messages:[],chats:[]},O=function(e,t){return m(e,{messages:[].concat(Object(w.a)(e.messages),[t.message])})},C=function(e,t){return m(e,{messages:t.messages.reverse()})},A=function(e,t){return m(e,{chats:t.chats})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_MESSAGE\":return O(e,t);case\"SET_MESSAGES\":return C(e,t);case\"GET_CHATS_SUCCESS\":return A(e,t);default:return e}},j=a(15),D=a(65),N=a(10),_=a(25),P=a(26),I=a(47),M=a(44),U=function(e){return e.children},F=function(){function e(){Object(j.a)(this,e),this.callbacks={},this.socketRef=null}return Object(N.a)(e,null,[{key:\"getInstance\",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(N.a)(e,[{key:\"connect\",value:function(e){var t=this,a=\"ws://127.0.0.1:8000/ws/chat/\".concat(e,\"/\");console.log(a),this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log(\"websocket open\")},this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.message)},this.socketRef.onclose=function(){console.log(\"websocket is closed\"),t.connect()}}},{key:\"disconnect\",value:function(){this.socketRef.close()}},{key:\"socketNewMessage\",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&(\"messages\"===a&&this.callbacks[a](t.messages),console.log(this),\"new_message\"===a&&this.callbacks[a](t.message),console.log(this))}},{key:\"fetchMessages\",value:function(e,t){this.sendMessage({command:\"fetch_messages\",username:e,chatId:t}),console.log(t),console.log(e)}},{key:\"newChatMessage\",value:function(e){this.sendMessage({command:\"new_message\",from:e.from,message:e.content,chatId:e.chatId}),console.log(e)}},{key:\"addCallbacks\",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:\"sendMessage\",value:function(e){try{this.socketRef.send(JSON.stringify(Object(u.a)({},e)))}catch(t){console.log(t.message)}}},{key:\"state\",value:function(){return this.socketRef.readyState}}]),e}();F.instance=null;var H=F.getInstance(),R=function(e){Object(P.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={messages:[]},n.messageChangeHandler=function(e){n.setState({message:e.target.value})},n.sendMessageHandler=function(e){e.preventDefault();var t={from:n.props.username,content:n.state.message,chatId:n.props.match.params.chatID};H.newChatMessage(t),n.setState({message:[]})},n.renderTimestamp=function(e){var t=Math.round(((new Date).getTime()-new Date(e).getTime())/6e4);return t<1?\"just now...\":t<60&&t>1?\"\".concat(t,\" minutes ago\"):t<1440&&t>60?\"\".concat(Math.round(t/60),\" hours ago\"):t<44640&&t>1440?\"\".concat(Math.round(t/1440),\" days ago\"):\"\".concat(new Date(e))},n.renderMessages=function(e){var t=n.props.username;return e.map((function(e,a,r){return s.a.createElement(\"li\",{key:e.id,style:{marginBottom:r.length-1===a?\"300px\":\"15px\"},className:e.author===t?\"replies\":\"sent\"},s.a.createElement(\"img\",{src:\"http://emilcarlsson.se/assets/mikeross.png\"}),s.a.createElement(\"p\",null,e.content,s.a.createElement(\"br\",null),s.a.createElement(\"small\",null,n.renderTimestamp(e.timestamp))))}))},n.scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:\"smooth\"})},n.initialiseChat(),n}return Object(N.a)(a,[{key:\"initialiseChat\",value:function(){var e=this;this.waitForSocketConnection((function(){H.fetchMessages(e.props.username,e.props.match.params.chatID)})),H.connect(this.props.match.params.chatID)}}]),Object(N.a)(a,[{key:\"componentWillReceiveProps\",value:function(e){var t=this;console.log(e),this.props.match.params.chatID!==e.match.params.chatID&&(H.disconnect(),this.waitForSocketConnection((function(){H.fetchMessages(t.props.username,e.match.params.chatID)})),H.connect(e.match.params.chatID))}},{key:\"waitForSocketConnection\",value:function(e){var t=this;setTimeout((function(){if(1===H.state())return console.log(\"connection is secure\"),void e();console.log(\"waiting for connection...\"),t.waitForSocketConnection(e)}),100)}},{key:\"componentDidMount\",value:function(){this.scrollToBottom()}},{key:\"componentDidUpdate\",value:function(){this.scrollToBottom()}},{key:\"render\",value:function(){var e=this;this.state.messages;return s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"messages\"},s.a.createElement(\"ul\",{id:\"chat-log\"},this.props.messages&&this.renderMessages(this.props.messages),s.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.messagesEnd=t}}))),s.a.createElement(\"div\",{className:\"message-input\"},s.a.createElement(\"form\",{onSubmit:this.sendMessageHandler},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"input\",{onChange:this.messageChangeHandler,value:this.state.message||\"\",required:!0,id:\"chat-message-input\",type:\"text\",placeholder:\"Write your message...\"}),s.a.createElement(\"i\",{className:\"fa fa-paperclip attachment\",\"aria-hidden\":\"true\"}),s.a.createElement(\"button\",{id:\"chat-message-submit\",className:\"submit\"},s.a.createElement(\"i\",{className:\"fa fa-paper-plane\",\"aria-hidden\":\"true\"}))))))}}]),a}(s.a.Component),x=Object(l.b)((function(e){return{username:e.auth.username,messages:e.message.messages}}))(R),L=function(){return s.a.createElement(U,null,s.a.createElement(M.b,{exact:!0,path:\"/:chatID/\",component:x}))},G=a(353),B=a(354),J=a(36),V=a.n(J),z=function(e,t){return{type:\"AUTH_SUCCESS\",token:t,username:e}},W=function(e){return{type:\"AUTH_FAIL\",error:e}},q=function(){return localStorage.removeItem(\"token\"),localStorage.removeItem(\"username\"),localStorage.removeItem(\"expirationDate\"),{type:\"AUTH_LOGOUT\"}},X=function(e){return function(t){setTimeout((function(){t(q())}),1e3*e)}},K=function(e,t){return function(a){V.a.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(t)},V.a.get(\"http://127.0.0.1:8000/chat/?username=\".concat(e)).then((function(e){return a({type:\"GET_CHATS_SUCCESS\",chats:e.data})}))}},Q=function(e){return s.a.createElement(I.b,{to:\"\".concat(e.chatURL),style:{color:\"#fff\"}},s.a.createElement(\"li\",{className:\"contact\"},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"span\",{className:\"contact-status online\"}),s.a.createElement(\"img\",{src:e.picURL,alt:\"\"}),s.a.createElement(\"div\",{className:\"meta\"},s.a.createElement(\"p\",{className:\"name\"},e.name)))))},Y=s.a.createElement(G.a,{type:\"loading\",style:{fontSize:24},spin:!0}),Z=function(e){Object(P.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={loginForm:!0},e.changeForm=function(){e.setState({loginForm:!e.state.loginForm})},e.authenticate=function(t){t.preventDefault(),e.state.loginForm?(e.props.login(t.target.username.value,t.target.password.value),console.log(t.target.username.value),console.log(t.target.password.value)):e.props.signup(t.target.username.value,t.target.email.value,t.target.password.value,t.target.password2.value)},e}return Object(N.a)(a,[{key:\"waitForAuthDetails\",value:function(){var e=this;setTimeout((function(){null===e.props.token||void 0===e.props.token?(console.log(\"waiting for authentication details...\"),e.waitForAuthDetails()):e.props.getUserChats(e.props.username,e.props.token)}),100)}},{key:\"componentDidMount\",value:function(){this.waitForAuthDetails()}},{key:\"openAddChatPopup\",value:function(){this.props.addChat()}},{key:\"render\",value:function(){var e=this,t=this.props.chats.map((function(e){return s.a.createElement(Q,{key:e.id,name:\"Harvey Specter\",picURL:\"http://emilcarlsson.se/assets/louislitt.png\",status:\"busy\",chatURL:\"/\".concat(e.id)})}));return s.a.createElement(\"div\",{id:\"sidepanel\"},s.a.createElement(\"div\",{id:\"profile\"},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"img\",{id:\"profile-img\",src:\"http://emilcarlsson.se/assets/mikeross.png\",className:\"online\",alt:\"\"}),s.a.createElement(\"p\",null,\"Mike Ross\"),s.a.createElement(\"i\",{className:\"fa fa-chevron-down expand-button\",\"aria-hidden\":\"true\"}),s.a.createElement(\"div\",{id:\"status-options\"},s.a.createElement(\"ul\",null,s.a.createElement(\"li\",{id:\"status-online\",className:\"active\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Online\")),s.a.createElement(\"li\",{id:\"status-away\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Away\")),s.a.createElement(\"li\",{id:\"status-busy\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Busy\")),s.a.createElement(\"li\",{id:\"status-offline\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Offline\")))),s.a.createElement(\"div\",{id:\"expanded\"},this.props.loading?s.a.createElement(B.a,{indicator:Y}):this.props.isAuthenticated?s.a.createElement(\"button\",{onClick:function(){return e.props.logout()},className:\"authBtn\"},s.a.createElement(\"span\",null,\"Logout\")):s.a.createElement(\"div\",null,s.a.createElement(\"form\",{method:\"POST\",onSubmit:this.authenticate},this.state.loginForm?s.a.createElement(\"div\",null,s.a.createElement(\"input\",{name:\"username\",type:\"text\",placeholder:\"username\"}),s.a.createElement(\"input\",{name:\"password\",type:\"password\",placeholder:\"password\"})):s.a.createElement(\"div\",null,s.a.createElement(\"input\",{name:\"username\",type:\"text\",placeholder:\"username\"}),s.a.createElement(\"input\",{name:\"email\",type:\"email\",placeholder:\"email\"}),s.a.createElement(\"input\",{name:\"password\",type:\"password\",placeholder:\"password\"}),s.a.createElement(\"input\",{name:\"password2\",type:\"password\",placeholder:\"password confirm\"})),s.a.createElement(\"button\",{type:\"submit\"},\"Authenticate\")),s.a.createElement(\"button\",{onClick:this.changeForm},\"Switch\"))))),s.a.createElement(\"div\",{id:\"search\"},s.a.createElement(\"label\",{htmlFor:\"\"},s.a.createElement(\"i\",{className:\"fa fa-search\",\"aria-hidden\":\"true\"})),s.a.createElement(\"input\",{type:\"text\",placeholder:\"Search contacts...\"})),s.a.createElement(\"div\",{id:\"contacts\"},s.a.createElement(\"ul\",null,t)),s.a.createElement(\"div\",{id:\"bottom-bar\"},s.a.createElement(\"button\",{id:\"addcontact\",onClick:function(){return e.openAddChatPopup()}},s.a.createElement(\"i\",{className:\"fa fa-user-plus fa-fw\",\"aria-hidden\":\"true\"}),s.a.createElement(\"span\",null,\"Add Chat\")),s.a.createElement(\"button\",{id:\"settings\"},s.a.createElement(\"i\",{className:\"fa fa-cog fa-fw\",\"aria-hidden\":\"true\"}),s.a.createElement(\"span\",null,\"Settings\"))))}}]),a}(s.a.Component),$=Object(l.b)((function(e){return{isAuthenticated:null!==e.auth.token,loading:e.auth.loading,token:e.auth.token,username:e.auth.username,chats:e.message.chats}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:\"AUTH_START\"}),V.a.post(\"http://127.0.0.1:8000/rest-auth/login/\",{username:e,password:t}).then((function(t){var n=t.data.key,s=new Date((new Date).getTime()+36e5);localStorage.setItem(\"token\",n),localStorage.setItem(\"username\",e),localStorage.setItem(\"expirationDate\",s),a(z(e,n)),a(X(3600))})).catch((function(e){a(W(e))}))}}(t,a))},logout:function(){return e(q())},signup:function(t,a,n,s){return e(function(e,t,a,n){return function(s){s({type:\"AUTH_START\"}),V.a.post(\"http://127.0.0.1:8000/rest-auth/registration/\",{username:e,email:t,password1:a,password2:n}).then((function(t){var a=t.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem(\"token\",a),localStorage.setItem(\"username\",e),localStorage.setItem(\"expirationDate\",n),s(z(e,a)),s(X(3600))})).catch((function(e){s(W(e))}))}}(t,a,n,s))},addChat:function(){return e({type:\"OPEN_AND_CHAT_POPUP\"})},getUserChats:function(t,a){return e(K(t,a))}}}))(Z),ee=function(e){Object(P.a)(a,e);var t=Object(_.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:\"render\",value:function(){return null===this.props.token?s.a.createElement(M.a,{to:\"/\"}):s.a.createElement(\"div\",{className:\"contact-profile\"},null!==this.props.username?s.a.createElement(U,null,s.a.createElement(\"img\",{src:\"http://emilcarlsson.se/assets/harveyspecter.png\",alt:\"\"}),s.a.createElement(\"p\",null,this.props.username),s.a.createElement(\"div\",{className:\"social-media\"},s.a.createElement(\"i\",{className:\"fa fa-facebook\",\"aria-hidden\":\"true\"}),s.a.createElement(\"i\",{className:\"fa fa-twitter\",\"aria-hidden\":\"true\"}),s.a.createElement(\"i\",{className:\"fa fa-instagram\",\"aria-hidden\":\"true\"}))):null)}}]),a}(s.a.Component),te=Object(l.b)((function(e){return{username:e.auth.username,token:e.auth.token}}))(ee),ae=a(356),ne=a(357),se=a(69),re=a(355),oe=re.a.Item;var ce=function(e){Object(P.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={usernames:[],error:null},e.handleChange=function(t){e.setState({usernames:t})},e.handleSubmit=function(t){var a=e.state.usernames;t.preventDefault(),e.props.form.validateFields((function(t,n){if(!t){var s=[].concat(Object(w.a)(a),[e.props.username]);console.log(s),V.a.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(e.props.token)},V.a.post(\"http://127.0.0.1:8000/chat/create/\",{messages:[],participants:s}).then((function(t){e.props.history.push(\"/\".concat(t.data.id)),e.props.closeAddChatPopup(),e.props.getUserChats(e.props.username,e.props.token)})).catch((function(t){console.error(t),e.setState({error:t})}))}}))},e}return Object(N.a)(a,[{key:\"componentDidMount\",value:function(){this.props.form.validateFields()}},{key:\"render\",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,r=t.getFieldError,o=(0,t.isFieldTouched)(\"userName\")&&r(\"userName\");return s.a.createElement(re.a,{layout:\"inline\",onSubmit:this.handleSubmit},this.state.error?\"\".concat(this.state.error):null,s.a.createElement(oe,{validateStatus:o?\"error\":\"\",help:o||\"\"},a(\"userName\",{rules:[{required:!0,message:\"Please input the username of the person you want to chat with\"}]})(s.a.createElement(ne.a,{mode:\"tags\",style:{width:\"100%\"},placeholder:\"Tags Mode\",onChange:this.handleChange},[]))),s.a.createElement(oe,null,s.a.createElement(se.a,{type:\"primary\",htmlType:\"submit\",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},\"Start a chat\")))}}]),a}(s.a.Component),le=re.a.create()(ce),ie=Object(M.f)(Object(l.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{closeAddChatPopup:function(){return e({type:\"CLOSE_ADD_CHAT_POPUP\"})},getUserChats:function(t,a){return e(K(t,a))}}}))(le)),ue=function(e){Object(P.a)(a,e);var t=Object(_.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:\"render\",value:function(){return console.log(\"Testing.....\"),s.a.createElement(ae.a,{centered:!0,footer:null,visible:this.props.isVisible,onCancel:this.props.close},s.a.createElement(ie,null))}}]),a}(s.a.Component),me=function(e){Object(P.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(j.a)(this,a),n=t.call(this,e),H.addCallbacks(n.props.setMessages.bind(Object(D.a)(n)),n.props.addMessage.bind(Object(D.a)(n))),n}return Object(N.a)(a,[{key:\"componentDidMount\",value:function(){this.props.onTryAutoSignup()}}]),Object(N.a)(a,[{key:\"render\",value:function(){var e=this;return s.a.createElement(I.a,null,s.a.createElement(\"div\",{id:\"frame\"},s.a.createElement($,null),s.a.createElement(\"div\",{className:\"content\"},s.a.createElement(ue,{isVisible:this.props.showAddChatPopup,close:function(){return e.props.closeAddChatPopup()}}),s.a.createElement(te,null),s.a.createElement(L,null))))}}]),a}(s.a.Component),pe=Object(l.b)((function(e){return{showAddChatPopup:e.nav.showAddChatPopup,authenticated:e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem(\"token\"),a=localStorage.getItem(\"username\");if(void 0===t)e(q());else{var n=new Date(localStorage.getItem(\"expirationDate\"));n<=new Date?e(q()):(e(z(a,t)),e(X((n.getTime()-(new Date).getTime())/1e3)))}}))},closeAddChatPopup:function(){return e({type:\"CLOSE_ADD_CHAT_POPUP\"})},addMessage:function(t){return e(function(e){return{type:\"ADD_MESSAGE\",message:e}}(t))},setMessages:function(t){return e(function(e){return{type:\"SET_MESSAGES\",messages:e}}(t))}}}))(me),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d;var de=function(){var e=Object(c.c)({auth:E,nav:y,message:T});return Object(c.e)(e,he(Object(c.a)(i.a)))}(),fe=s.a.createElement(l.a,{store:de},s.a.createElement(pe,null));o.a.render(fe,document.getElementById(\"app\"))}},[[176,1,2]]]);","extractedComments":[]}