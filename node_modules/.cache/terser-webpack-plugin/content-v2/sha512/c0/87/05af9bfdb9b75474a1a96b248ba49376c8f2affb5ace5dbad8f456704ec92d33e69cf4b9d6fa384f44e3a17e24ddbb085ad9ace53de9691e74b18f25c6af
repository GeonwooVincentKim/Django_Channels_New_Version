{"map":{"version":3,"sources":["static/js/main.90391bf3.chunk.js"],"names":["this","push","176","module","exports","__webpack_require__","350","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","classCallCheck","createClass","createSuper","inherits","es","objectSpread2","websocket_WebSocketService","WebSocketService","Object","callbacks","socketRef","key","value","instance","chatUrl","_this","path","concat","console","log","WebSocket","onopen","onmessage","e","socketNewMessage","data","onerror","message","onclose","connect","close","parsedData","JSON","parse","command","keys","length","messages","username","chatId","sendMessage","from","content","messagesCallback","newMessageCallback","send","stringify","err","readyState","callback","socket","recursion","waitForSocketConnection","setTimeout","websocket","getInstance","hoc","props","children","Chat_Chat","_React$Component","Chat","_super","call","state","messageChangeHandler","event","setState","target","sendMessageHandler","preventDefault","messageObject","match","params","chatID","newChatMessage","renderTimestamp","timestamp","timeDiff","Math","round","Date","getTime","renderMessages","currentUser","map","i","arr","a","createElement","id","style","marginBottom","className","author","src","scrollToBottom","messagesEnd","scrollIntoView","behavior","initialiseChat","_this2","fetchMessages","newProps","_this3","disconnect","component","_this4","float","clear","ref","el","onSubmit","onChange","required","type","placeholder","aria-hidden","Component","containers_Chat","auth","redux","redux_thunk_es","utility_updateObject","oldObject","updatedProperties","initialState","token","error","loading","auth_authStart","action","auth_authSuccess","auth_authFail","auth_authLogout","arguments","undefined","nav_initialState","showAddChatPopup","nav_openAddChatPopup","nav_closeAddChatPopup","nav","toConsumableArray","message_initialState","chats","message_addMessage","message_setMessages","reverse","message_setChats","reducers_message","assertThisInitialized","react_router_dom","axios","axios_default","actions_auth_authSuccess","actions_auth_authFail","auth_logout","localStorage","removeItem","checkAuthTimeout","expirationTime","dispatch","react_router","routes","exact","Icon","spin","message_getUserChats","defaults","headers","Content-Type","Authorization","get","then","res","components_Contact","to","chatURL","color","picURL","alt","name","antIcon","fontSize","Sidepanel_Sidepanel","Sidepanel","_len","args","Array","_key","apply","loginForm","changeForm","authenticate","login","password","signup","email","password2","waitForAuthDetails","getUserChats","addChat","activeChats","c","status","indicator","isAuthenticated","onClick","logout","method","htmlFor","openAddChatPopup","containers_Sidepanel","userName","post","expirationDate","setItem","catch","auth_authLogin","password1","auth_authSignup","Profile_Profile","Profile","containers_Profile","modal","es_select","es_button","es_form","FormItem","Item","Form_HorizontalAddChatForm","HorizontalAddChatForm","usernames","handleChange","handleSubmit","form","validateFields","values","combined","participants","history","closeAddChatPopup","fieldsError","_this$props$form","getFieldDecorator","getFieldsError","getFieldError","userNameError","isFieldTouched","layout","validateStatus","help","rules","mode","width","htmlType","disabled","some","field","AddChatForm","create","Form","Popup","AddChatModal","centered","footer","visible","isVisible","onCancel","App_App","App","addCallbacks","setMessages","bind","addMessage","onTryAutoSignup","src_App","authenticated","getItem","actions_message_addMessage","actions_message_setMessages","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","src_store","rootReducer","configureStore","app","store","render","document","getElementById"],"mappings":"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"},"code":"(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{176:function(e,t,a){e.exports=a(350)},350:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),r=a(4),o=a.n(r),c=a(15),i=a(10),l=a(25),u=a(26),m=a(24),p=a(94),h=function(){function e(){Object(c.a)(this,e),this.callbacks={},this.socketRef=null}return Object(i.a)(e,null,[{key:\"getInstance\",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(i.a)(e,[{key:\"connect\",value:function(e){var t=this,a=\"ws://127.0.0.1:8000/ws/chat/\".concat(e,\"/\");console.log(a),this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log(\"websocket open\")},this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.message)},this.socketRef.onclose=function(){console.log(\"websocket is closed\"),t.connect()}}},{key:\"disconnect\",value:function(){this.socketRef.close()}},{key:\"socketNewMessage\",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&(\"messages\"===a&&this.callbacks[a](t.messages),console.log(this),\"new_message\"===a&&this.callbacks[a](t.message),console.log(this))}},{key:\"fetchMessages\",value:function(e,t){this.sendMessage({command:\"fetch_messages\",username:e,chatId:t}),console.log(t),console.log(e)}},{key:\"newChatMessage\",value:function(e){this.sendMessage({command:\"new_message\",from:e.from,message:e.content,chatId:e.chatId}),console.log(e)}},{key:\"addCallbacks\",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:\"sendMessage\",value:function(e){try{this.socketRef.send(JSON.stringify(Object(p.a)({},e)))}catch(t){console.log(t.message)}}},{key:\"state\",value:function(){return this.socketRef.readyState}},{key:\"waitForSocketConnection\",value:function(e){var t=this.socketRef,a=this.waitForSocketConnection;setTimeout((function(){if(1===t.readyState)return console.log(\"connection is secure\"),void(null!=callbacks&&e());console.log(\"waiting for connection...\"),a(e)}),1)}}]),e}();h.instance=null;var d=h.getInstance(),f=function(e){return e.children},g=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={messages:[]},n.messageChangeHandler=function(e){n.setState({message:e.target.value})},n.sendMessageHandler=function(e){e.preventDefault();var t={from:n.props.username,content:n.state.message,chatId:n.props.match.params.chatID};d.newChatMessage(t),n.setState({message:[]})},n.renderTimestamp=function(e){var t=Math.round(((new Date).getTime()-new Date(e).getTime())/6e4);return t<1?\"just now...\":t<60&&t>1?\"\".concat(t,\" minutes ago\"):t<1440&&t>60?\"\".concat(Math.round(t/60),\" hours ago\"):t<44640&&t>1440?\"\".concat(Math.round(t/1440),\" days ago\"):\"\".concat(new Date(e))},n.renderMessages=function(e){var t=n.props.username;return e.map((function(e,a,r){return s.a.createElement(\"li\",{key:e.id,style:{marginBottom:r.length-1===a?\"300px\":\"15px\"},className:e.author===t?\"replies\":\"sent\"},s.a.createElement(\"img\",{src:\"http://emilcarlsson.se/assets/mikeross.png\"}),s.a.createElement(\"p\",null,e.content,s.a.createElement(\"br\",null),s.a.createElement(\"small\",null,n.renderTimestamp(e.timestamp))))}))},n.scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:\"smooth\"})},n.initialiseChat(),n}return Object(i.a)(a,[{key:\"initialiseChat\",value:function(){var e=this;this.waitForSocketConnection((function(){d.fetchMessages(e.props.username,e.props.match.params.chatID)})),d.connect(this.props.match.params.chatID)}}]),Object(i.a)(a,[{key:\"componentWillReceiveProps\",value:function(e){var t=this;console.log(e),this.props.match.params.chatID!==e.match.params.chatID&&(d.disconnect(),this.waitForSocketConnection((function(){d.fetchMessages(t.props.username,e.match.params.chatID)})),d.connect(e.match.params.chatID))}},{key:\"waitForSocketConnection\",value:function(e){var t=this;setTimeout((function(){if(1===d.state())return console.log(\"connection is secure\"),void e();console.log(\"waiting for connection...\"),t.waitForSocketConnection(e)}),100)}},{key:\"componentDidMount\",value:function(){this.scrollToBottom()}},{key:\"componentDidUpdate\",value:function(){this.scrollToBottom()}},{key:\"render\",value:function(){var e=this;this.state.messages;return s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"messages\"},s.a.createElement(\"ul\",{id:\"chat-log\"},this.props.messages&&this.renderMessages(this.props.messages),s.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.messagesEnd=t}}))),s.a.createElement(\"div\",{className:\"message-input\"},s.a.createElement(\"form\",{onSubmit:this.sendMessageHandler},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"input\",{onChange:this.messageChangeHandler,value:this.state.message||\"\",required:!0,id:\"chat-message-input\",type:\"text\",placeholder:\"Write your message...\"}),s.a.createElement(\"i\",{className:\"fa fa-paperclip attachment\",\"aria-hidden\":\"true\"}),s.a.createElement(\"button\",{id:\"chat-message-submit\",className:\"submit\"},s.a.createElement(\"i\",{className:\"fa fa-paper-plane\",\"aria-hidden\":\"true\"}))))))}}]),a}(s.a.Component),E=Object(m.b)((function(e){return{username:e.auth.username,messages:e.message.messages}}))(g),v=a(52),b=a(150),k=(a(185),function(e,t){return Object(p.a)({},e,{},t)}),y={token:null,username:null,error:null,loading:!1},w=function(e,t){return k(e,{error:null,loading:!0})},S=function(e,t){return k(e,{token:t.token,username:t.username,error:null,loading:!1})},O=function(e,t){return k(e,{error:t.error,loading:!1})},C=function(e,t){return k(e,{token:null})},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"AUTH_START\":return w(e);case\"AUTH_SUCCESS\":return S(e,t);case\"AUTH_FAIL\":return O(e,t);case\"AUTH_LOGOUT\":return C(e);default:return e}},T={showAddChatPopup:!1},j=function(e,t){return k(e,{showAddChatPopup:!0})},D=function(e,t){return k(e,{showAddChatPopup:!1})},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"OPEN_AND_CHAT_POPUP\":return j(e);case\"CLOSE_ADD_CHAT_POPUP\":return D(e);default:return e}},_=a(93),P={messages:[],chats:[]},I=function(e,t){return k(e,{messages:[].concat(Object(_.a)(e.messages),[t.message])})},M=function(e,t){return k(e,{messages:t.messages.reverse()})},U=function(e,t){return k(e,{chats:t.chats})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_MESSAGE\":return I(e,t);case\"SET_MESSAGES\":return M(e,t);case\"GET_CHATS_SUCCESS\":return U(e,t);default:return e}},H=a(65),R=a(47),x=a(33),L=a.n(x),G=function(e,t){return{type:\"AUTH_SUCCESS\",token:t,username:e}},B=function(e){return{type:\"AUTH_FAIL\",error:e}},J=function(){return localStorage.removeItem(\"token\"),localStorage.removeItem(\"username\"),localStorage.removeItem(\"expirationDate\"),{type:\"AUTH_LOGOUT\"}},V=function(e){return function(t){setTimeout((function(){t(J())}),1e3*e)}},z=a(44),W=function(){return s.a.createElement(f,null,s.a.createElement(z.b,{exact:!0,path:\"/:chatID/\",component:E}))},q=a(353),X=a(354),K=function(e,t){return function(a){L.a.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(t)},L.a.get(\"http://127.0.0.1:8000/chat/?username=\".concat(e)).then((function(e){return a({type:\"GET_CHATS_SUCCESS\",chats:e.data})}))}},Q=function(e){return s.a.createElement(R.b,{to:\"\".concat(e.chatURL),style:{color:\"#fff\"}},s.a.createElement(\"li\",{className:\"contact\"},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"span\",{className:\"contact-status online\"}),s.a.createElement(\"img\",{src:e.picURL,alt:\"\"}),s.a.createElement(\"div\",{className:\"meta\"},s.a.createElement(\"p\",{className:\"name\"},e.name)))))},Y=s.a.createElement(q.a,{type:\"loading\",style:{fontSize:24},spin:!0}),Z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={loginForm:!0},e.changeForm=function(){e.setState({loginForm:!e.state.loginForm})},e.authenticate=function(t){t.preventDefault(),e.state.loginForm?(e.props.login(t.target.username.value,t.target.password.value),console.log(t.target.username.value),console.log(t.target.password.value)):e.props.signup(t.target.username.value,t.target.email.value,t.target.password.value,t.target.password2.value)},e}return Object(i.a)(a,[{key:\"waitForAuthDetails\",value:function(){var e=this;setTimeout((function(){null===e.props.token||void 0===e.props.token?(console.log(\"waiting for authentication details...\"),e.waitForAuthDetails()):e.props.getUserChats(e.props.username,e.props.token)}),100)}},{key:\"componentDidMount\",value:function(){this.waitForAuthDetails()}},{key:\"openAddChatPopup\",value:function(){this.props.addChat()}},{key:\"render\",value:function(){var e=this,t=this.props.chats.map((function(e){return s.a.createElement(Q,{key:e.id,name:\"Harvey Specter\",picURL:\"http://emilcarlsson.se/assets/louislitt.png\",status:\"busy\",chatURL:\"/\".concat(e.id)})}));return s.a.createElement(\"div\",{id:\"sidepanel\"},s.a.createElement(\"div\",{id:\"profile\"},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"img\",{id:\"profile-img\",src:\"http://emilcarlsson.se/assets/mikeross.png\",className:\"online\",alt:\"\"}),s.a.createElement(\"p\",null,\"Mike Ross\"),s.a.createElement(\"i\",{className:\"fa fa-chevron-down expand-button\",\"aria-hidden\":\"true\"}),s.a.createElement(\"div\",{id:\"status-options\"},s.a.createElement(\"ul\",null,s.a.createElement(\"li\",{id:\"status-online\",className:\"active\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Online\")),s.a.createElement(\"li\",{id:\"status-away\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Away\")),s.a.createElement(\"li\",{id:\"status-busy\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Busy\")),s.a.createElement(\"li\",{id:\"status-offline\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Offline\")))),s.a.createElement(\"div\",{id:\"expanded\"},this.props.loading?s.a.createElement(X.a,{indicator:Y}):this.props.isAuthenticated?s.a.createElement(\"button\",{onClick:function(){return e.props.logout()},className:\"authBtn\"},s.a.createElement(\"span\",null,\"Logout\")):s.a.createElement(\"div\",null,s.a.createElement(\"form\",{method:\"POST\",onSubmit:this.authenticate},this.state.loginForm?s.a.createElement(\"div\",null,s.a.createElement(\"input\",{name:\"username\",type:\"text\",placeholder:\"username\"}),s.a.createElement(\"input\",{name:\"password\",type:\"password\",placeholder:\"password\"})):s.a.createElement(\"div\",null,s.a.createElement(\"input\",{name:\"username\",type:\"text\",placeholder:\"username\"}),s.a.createElement(\"input\",{name:\"email\",type:\"email\",placeholder:\"email\"}),s.a.createElement(\"input\",{name:\"password\",type:\"password\",placeholder:\"password\"}),s.a.createElement(\"input\",{name:\"password2\",type:\"password\",placeholder:\"password confirm\"})),s.a.createElement(\"button\",{type:\"submit\"},\"Authenticate\")),s.a.createElement(\"button\",{onClick:this.changeForm},\"Switch\"))))),s.a.createElement(\"div\",{id:\"search\"},s.a.createElement(\"label\",{htmlFor:\"\"},s.a.createElement(\"i\",{className:\"fa fa-search\",\"aria-hidden\":\"true\"})),s.a.createElement(\"input\",{type:\"text\",placeholder:\"Search contacts...\"})),s.a.createElement(\"div\",{id:\"contacts\"},s.a.createElement(\"ul\",null,t)),s.a.createElement(\"div\",{id:\"bottom-bar\"},s.a.createElement(\"button\",{id:\"addcontact\",onClick:function(){return e.openAddChatPopup()}},s.a.createElement(\"i\",{className:\"fa fa-user-plus fa-fw\",\"aria-hidden\":\"true\"}),s.a.createElement(\"span\",null,\"Add Chat\")),s.a.createElement(\"button\",{id:\"settings\"},s.a.createElement(\"i\",{className:\"fa fa-cog fa-fw\",\"aria-hidden\":\"true\"}),s.a.createElement(\"span\",null,\"Settings\"))))}}]),a}(s.a.Component),$=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token,loading:e.auth.loading,token:e.auth.token,username:e.auth.username,chats:e.message.chats}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:\"AUTH_START\"}),L.a.post(\"http://127.0.0.1:8000/rest-auth/login/\",{username:e,password:t}).then((function(t){var n=t.data.key,s=new Date((new Date).getTime()+36e5);localStorage.setItem(\"token\",n),localStorage.setItem(\"username\",e),localStorage.setItem(\"expirationDate\",s),a(G(e,n)),a(V(3600))})).catch((function(e){a(B(e))}))}}(t,a))},logout:function(){return e(J())},signup:function(t,a,n,s){return e(function(e,t,a,n){return function(s){s({type:\"AUTH_START\"}),L.a.post(\"http://127.0.0.1:8000/rest-auth/registration/\",{username:e,email:t,password1:a,password2:n}).then((function(t){var a=t.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem(\"token\",a),localStorage.setItem(\"username\",e),localStorage.setItem(\"expirationDate\",n),s(G(e,a)),s(V(3600))})).catch((function(e){s(B(e))}))}}(t,a,n,s))},addChat:function(){return e({type:\"OPEN_AND_CHAT_POPUP\"})},getUserChats:function(t,a){return e(K(t,a))}}}))(Z),ee=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:\"render\",value:function(){return null===this.props.token?s.a.createElement(z.a,{to:\"/\"}):s.a.createElement(\"div\",{className:\"contact-profile\"},null!==this.props.username?s.a.createElement(f,null,s.a.createElement(\"img\",{src:\"http://emilcarlsson.se/assets/harveyspecter.png\",alt:\"\"}),s.a.createElement(\"p\",null,this.props.username),s.a.createElement(\"div\",{className:\"social-media\"},s.a.createElement(\"i\",{className:\"fa fa-facebook\",\"aria-hidden\":\"true\"}),s.a.createElement(\"i\",{className:\"fa fa-twitter\",\"aria-hidden\":\"true\"}),s.a.createElement(\"i\",{className:\"fa fa-instagram\",\"aria-hidden\":\"true\"}))):null)}}]),a}(s.a.Component),te=Object(m.b)((function(e){return{username:e.auth.username,token:e.auth.token}}))(ee),ae=a(356),ne=a(357),se=a(69),re=a(355),oe=re.a.Item;var ce=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={usernames:[],error:null},e.handleChange=function(t){e.setState({usernames:t})},e.handleSubmit=function(t){var a=e.state.usernames;t.preventDefault(),e.props.form.validateFields((function(t,n){if(!t){var s=[].concat(Object(_.a)(a),[e.props.username]);console.log(s),L.a.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(e.props.token)},L.a.post(\"http://127.0.0.1:8000/chat/create/\",{messages:[],participants:s}).then((function(t){e.props.history.push(\"/\".concat(t.data.id)),e.props.closeAddChatPopup(),e.props.getUserChats(e.props.username,e.props.token)})).catch((function(t){console.error(t),e.setState({error:t})}))}}))},e}return Object(i.a)(a,[{key:\"componentDidMount\",value:function(){this.props.form.validateFields()}},{key:\"render\",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,r=t.getFieldError,o=(0,t.isFieldTouched)(\"userName\")&&r(\"userName\");return s.a.createElement(re.a,{layout:\"inline\",onSubmit:this.handleSubmit},this.state.error?\"\".concat(this.state.error):null,s.a.createElement(oe,{validateStatus:o?\"error\":\"\",help:o||\"\"},a(\"userName\",{rules:[{required:!0,message:\"Please input the username of the person you want to chat with\"}]})(s.a.createElement(ne.a,{mode:\"tags\",style:{width:\"100%\"},placeholder:\"Tags Mode\",onChange:this.handleChange},[]))),s.a.createElement(oe,null,s.a.createElement(se.a,{type:\"primary\",htmlType:\"submit\",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},\"Start a chat\")))}}]),a}(s.a.Component),ie=re.a.create()(ce),le=Object(z.f)(Object(m.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{closeAddChatPopup:function(){return e({type:\"CLOSE_ADD_CHAT_POPUP\"})},getUserChats:function(t,a){return e(K(t,a))}}}))(ie)),ue=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:\"render\",value:function(){return console.log(\"Testing.....\"),s.a.createElement(ae.a,{centered:!0,footer:null,visible:this.props.isVisible,onCancel:this.props.close},s.a.createElement(le,null))}}]),a}(s.a.Component),me=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),d.addCallbacks(n.props.setMessages.bind(Object(H.a)(n)),n.props.addMessage.bind(Object(H.a)(n))),n}return Object(i.a)(a,[{key:\"componentDidMount\",value:function(){this.props.onTryAutoSignup()}}]),Object(i.a)(a,[{key:\"render\",value:function(){var e=this;return s.a.createElement(R.a,null,s.a.createElement(\"div\",{id:\"frame\"},s.a.createElement($,null),s.a.createElement(\"div\",{className:\"content\"},s.a.createElement(ue,{isVisible:this.props.showAddChatPopup,close:function(){return e.props.closeAddChatPopup()}}),s.a.createElement(te,null),s.a.createElement(W,null))))}}]),a}(s.a.Component),pe=Object(m.b)((function(e){return{showAddChatPopup:e.nav.showAddChatPopup,authenticated:e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem(\"token\"),a=localStorage.getItem(\"username\");if(void 0===t)e(J());else{var n=new Date(localStorage.getItem(\"expirationDate\"));n<=new Date?e(J()):(e(G(a,t)),e(V((n.getTime()-(new Date).getTime())/1e3)))}}))},closeAddChatPopup:function(){return e({type:\"CLOSE_ADD_CHAT_POPUP\"})},addMessage:function(t){return e(function(e){return{type:\"ADD_MESSAGE\",message:e}}(t))},setMessages:function(t){return e(function(e){return{type:\"SET_MESSAGES\",messages:e}}(t))}}}))(me),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d;var de=function(){var e=Object(v.c)({auth:A,nav:N,message:F});return Object(v.e)(e,he(Object(v.a)(b.a)))}(),fe=s.a.createElement(m.a,{store:de},s.a.createElement(pe,null));o.a.render(fe,document.getElementById(\"app\"))}},[[176,1,2]]]);","extractedComments":[]}