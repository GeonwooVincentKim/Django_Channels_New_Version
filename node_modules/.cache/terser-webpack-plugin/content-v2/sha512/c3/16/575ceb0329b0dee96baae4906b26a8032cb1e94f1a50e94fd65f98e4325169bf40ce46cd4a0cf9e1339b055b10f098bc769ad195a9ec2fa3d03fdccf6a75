{"map":{"version":3,"sources":["static/js/main.52ce1bd1.chunk.js"],"names":["this","push","176","module","exports","__webpack_require__","350","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","classCallCheck","createClass","createSuper","inherits","es","objectSpread2","websocket_WebSocketService","WebSocketService","Object","callbacks","socketRef","key","value","instance","chatUrl","_this","path","concat","console","log","WebSocket","onopen","onmessage","e","socketNewMessage","data","onerror","message","onclose","connect","close","parsedData","JSON","parse","command","keys","length","messages","username","chatId","sendMessage","from","content","messagesCallback","newMessageCallback","send","stringify","err","readyState","websocket","getInstance","hoc","props","children","Chat_Chat","_React$Component","Chat","_super","call","state","messageChangeHandler","event","setState","target","sendMessageHandler","preventDefault","messageObject","match","params","chatID","newChatMessage","renderTimestamp","timestamp","timeDiff","Math","round","Date","getTime","renderMessages","currentUser","map","i","arr","a","createElement","id","style","marginBottom","className","author","src","scrollToBottom","messagesEnd","scrollIntoView","behavior","initialiseChat","_this2","waitForSocketConnection","fetchMessages","newProps","_this3","disconnect","callback","component","setTimeout","_this4","float","clear","ref","el","onSubmit","onChange","required","type","placeholder","aria-hidden","Component","containers_Chat","auth","redux","redux_thunk_es","utility_updateObject","oldObject","updatedProperties","initialState","token","error","loading","auth_authStart","action","auth_authSuccess","auth_authFail","auth_authLogout","arguments","undefined","nav_initialState","showAddChatPopup","nav_openAddChatPopup","nav_closeAddChatPopup","nav","toConsumableArray","message_initialState","chats","message_addMessage","message_setMessages","reverse","message_setChats","reducers_message","assertThisInitialized","react_router_dom","axios","axios_default","actions_auth_authSuccess","actions_auth_authFail","auth_logout","localStorage","removeItem","checkAuthTimeout","expirationTime","dispatch","react_router","routes","exact","Icon","spin","message_getUserChats","defaults","headers","Content-Type","Authorization","get","then","res","components_Contact","to","chatURL","color","picURL","alt","name","antIcon","fontSize","Sidepanel_Sidepanel","Sidepanel","_len","args","Array","_key","apply","loginForm","changeForm","authenticate","login","password","signup","email","password2","waitForAuthDetails","getUserChats","addChat","activeChats","c","status","indicator","isAuthenticated","onClick","logout","method","htmlFor","openAddChatPopup","containers_Sidepanel","userName","post","expirationDate","setItem","catch","auth_authLogin","password1","auth_authSignup","Profile_Profile","Profile","containers_Profile","modal","es_select","es_button","es_form","FormItem","Item","Form_HorizontalAddChatForm","HorizontalAddChatForm","usernames","handleChange","handleSubmit","form","validateFields","values","combined","participants","history","closeAddChatPopup","fieldsError","_this$props$form","getFieldDecorator","getFieldsError","getFieldError","userNameError","isFieldTouched","layout","validateStatus","help","rules","mode","width","htmlType","disabled","some","field","AddChatForm","create","Form","Popup","AddChatModal","centered","footer","visible","isVisible","onCancel","App_App","App","addCallbacks","setMessages","bind","addMessage","onTryAutoSignup","src_App","authenticated","getItem","actions_message_addMessage","actions_message_setMessages","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","src_store","rootReducer","configureStore","app","store","render","document","getElementById"],"mappings":"CAACA,KAA2B,qBAAIA,KAA2B,sBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAExEC,IACA,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAoB,MAK/BC,IACA,SAAUH,EAAQI,EAAqBF,GAE7C,aAEAA,EAAoBG,EAAED,GAGtB,IAAIE,EAAQJ,EAAoB,GAC5BK,EAA6BL,EAAoBM,EAAEF,GAGnDG,EAAYP,EAAoB,GAChCQ,EAAiCR,EAAoBM,EAAEC,GAGvDE,EAAiBT,EAAoB,IAGrCU,EAAcV,EAAoB,IAGlCW,EAAcX,EAAoB,IAGlCY,EAAWZ,EAAoB,IAG/Ba,EAAKb,EAAoB,IAGzBc,EAAgBd,EAAoB,IAGpCe,EAAwC,WACwG,SAASC,IAAmBC,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAKqB,GAAkBrB,KAAKuB,UAAU,GAAGvB,KAAKwB,UAAU,KAyC9Q,OA1CmDF,OAAOP,EAA6B,EAApCO,CAAuCD,EAAiB,KAAK,CAAC,CAACI,IAAI,cAC1HC,MAAM,WAAwG,OAA7EL,EAAiBM,WAAUN,EAAiBM,SAAS,IAAIN,GAA2BA,EAAiBM,aAAkJL,OAAOP,EAA6B,EAApCO,CAAuCD,EAAiB,CAAC,CAACI,IAAI,UAAUC,MAAM,SAAiBE,GAAS,IAAIC,EAAM7B,KAAS8B,EAAK,+BAA+BC,OAAOH,EAAQ,KAAKI,QAAQC,IAAIH,GAAM9B,KAAKwB,UAAU,IAAIU,UAAUJ,GAAM9B,KAAKwB,UAAUW,OAAO,WAAWH,QAAQC,IAAI,mBAG7iBjC,KAAKwB,UAAUY,UAAU,SAASC,GAClCR,EAAMS,iBAAiBD,EAAEE,OAAQvC,KAAKwB,UAAUgB,QAAQ,SAASH,GAAGL,QAAQC,IAAII,EAAEI,UAAWzC,KAAKwB,UAAUkB,QAAQ,WAAWV,QAAQC,IAAI,uBAAuBJ,EAAMc,aAAe,CAAClB,IAAI,aAAaC,MAAM,WAAsB1B,KAAKwB,UAAUoB,UAAW,CAACnB,IAAI,mBAAmBC,MAAM,SAA0Ba,GACvT,IAAIM,EAAWC,KAAKC,MAAMR,GAItBS,EAAQH,EAAWG,QACiB,IAArC1B,OAAO2B,KAAKjD,KAAKuB,WAAW2B,SAAiC,aAAVF,GAAsBhD,KAAKuB,UAAUyB,GAASH,EAAWM,UAAWnB,QAAQC,IAAIjC,MAAmB,gBAAVgD,GAC/IhD,KAAKuB,UAAUyB,GAASH,EAAWJ,SAAUT,QAAQC,IAAIjC,SAEvD,CAACyB,IAAI,gBAAgBC,MAAM,SAAuB0B,EAASC,GAAQrD,KAAKsD,YAAY,CAACN,QAAQ,iBAAiBI,SAASA,EAASC,OAAOA,IAASrB,QAAQC,IAAIoB,GAAQrB,QAAQC,IAAImB,KAAa,CAAC3B,IAAI,iBAAiBC,MAAM,SAAwBe,GAASzC,KAAKsD,YAAY,CAACN,QAAQ,cAAcO,KAAKd,EAAQc,KAAKd,QAAQA,EAAQe,QAAQH,OAAOZ,EAAQY,SAASrB,QAAQC,IAAIQ,KAEhX,CAAChB,IAAI,eAAeC,MAAM,SAAsB+B,EAAiBC,GAAoB1D,KAAKuB,UAAoB,SAAEkC,EAAiBzD,KAAKuB,UAAuB,YAAEmC,IAAsB,CAACjC,IAAI,cAAcC,MAAM,SAAqBa,GAAM,IAAIvC,KAAKwB,UAAUmC,KAAKb,KAAKc,UAAUtC,OAAOH,EAA+B,EAAtCG,CAAyC,GAAGiB,KAAS,MAAMsB,GAAK7B,QAAQC,IAAI4B,EAAIpB,YAAa,CAAChB,IAAI,QAAQC,MAAM,WAAiB,OAAO1B,KAAKwB,UAAUsC,eA0B9ZzC,EA1CiC,GA2C5CD,EAA2BO,SAAS,KAAK,IAAgGoC,EAA1E3C,EAA2B4C,cAELC,EAA7E,SAAaC,GAAO,OAAOA,EAAMC,UAGrCC,EAAuB,SAASC,GAAkB/C,OAAOL,EAA0B,EAAjCK,CAAoCgD,EAAKD,GAAkB,IAAIE,EAAOjD,OAAON,EAA6B,EAApCM,CAAuCgD,GAa5G,SAASA,EAAKJ,GAAO,IAAIrC,EAOia,OAP3ZP,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAKsE,IACrIzC,EAAM0C,EAAOC,KAAKxE,KAAKkE,IAAaO,MAAM,CAACtB,SAAS,IAAItB,EAAM6C,qBAAqB,SAASC,GAAO9C,EAAM+C,SAAS,CAACnC,QAAQkC,EAAME,OAAOnD,SAAUG,EAAMiD,mBAAmB,SAASzC,GAAGA,EAAE0C,iBAAiB,IAAIC,EAAc,CAACzB,KAAK1B,EAAMqC,MAAMd,SAASI,QAAQ3B,EAAM4C,MAAMhC,QAAQY,OAAOxB,EAAMqC,MAAMe,MAAMC,OAAOC,QAAQpB,EAAUqB,eAAeJ,GAAenD,EAAM+C,SAAS,CAACnC,QAAQ,MAAOZ,EAAMwD,gBAAgB,SAASC,GAAW,IAAkBC,EAASC,KAAKC,QAAO,IAAIC,MAAOC,UAAU,IAAID,KAAKJ,GAAWK,WAAW,KAI/Z,OAJyaJ,EAAS,EACnhB,cAAuBA,EAAS,IAAIA,EAAS,EAC7C,GAAGxD,OAAOwD,EAAS,gBAAyBA,EAAS,MAAOA,EAAS,GACrE,GAAGxD,OAAOyD,KAAKC,MAAMF,EAAS,IAAI,cAAuBA,EAAS,OAAUA,EAAS,KACrF,GAAGxD,OAAOyD,KAAKC,MAAMF,EAAS,MAAS,aAA0B,GAAGxD,OAAO,IAAI2D,KAAKJ,KAA6BzD,EAAM+D,eAAe,SAASzC,GAAU,IAAI0C,EAAYhE,EAAMqC,MAAMd,SAAS,OAAOD,EAAS2C,KAAI,SAASrD,EAAQsD,EAAEC,GAAK,OAAmBtF,EAAcuF,EAAEC,cAAc,KAAK,CACvSzE,IAAIgB,EAAQ0D,GAAGC,MAAM,CAACC,aAAaL,EAAI9C,OAAO,IAAI6C,EAAE,QAAQ,QAC3DO,UAAU7D,EAAQ8D,SAASV,EAAY,UAAU,QAAqBnF,EAAcuF,EAAEC,cAAc,MAAM,CAACM,IAAI,+CAA4D9F,EAAcuF,EAAEC,cAAc,IAAI,KAAKzD,EAAQe,QAAqB9C,EAAcuF,EAAEC,cAAc,KAAK,MAAmBxF,EAAcuF,EAAEC,cAAc,QAAQ,KAAKrE,EAAMwD,gBAAgB5C,EAAQ6C,kBAAmBzD,EAAM4E,eAAe,WAAW5E,EAAM6E,YAAYC,eAAe,CAACC,SAAS,YAAa/E,EAAMgF,iBAAwBhF,EAmB8mB,OAvC77BP,OAAOP,EAA6B,EAApCO,CAAuCgD,EAAK,CAAC,CAAC7C,IAAI,iBAC3NC,MAAM,WAA0B,IAAIoF,EAAO9G,KAAKA,KAAK+G,yBAAwB,WAW7EhD,EAAUiD,cAAcF,EAAO5C,MAAMd,SAAS0D,EAAO5C,MAAMe,MAAMC,OAAOC,WACxEpB,EAAUpB,QAAQ3C,KAAKkE,MAAMe,MAAMC,OAAOC,YAOqd7D,OAAOP,EAA6B,EAApCO,CAAuCgD,EAAK,CAAC,CAAC7C,IAAI,4BAA4BC,MAAM,SAAmCuF,GAAU,IAAIC,EAAOlH,KAAKgC,QAAQC,IAAIgF,GAMzpBjH,KAAKkE,MAAMe,MAAMC,OAAOC,SAAS8B,EAAShC,MAAMC,OAAOC,SAAQpB,EAAUoD,aAAanH,KAAK+G,yBAAwB,WAAWhD,EAAUiD,cAAcE,EAAOhD,MAAMd,SAAS6D,EAAShC,MAAMC,OAAOC,WAAWpB,EAAUpB,QAAQsE,EAAShC,MAAMC,OAAOC,WAGtP,CAAC1D,IAAI,0BAA0BC,MAAM,SAAiC0F,GAAU,IAAIC,EAAUrH,KAGhGsH,YACA,WAAW,GAAuB,IAApBvD,EAAUU,QAGxB,OAHqCzC,QAAQC,IAAI,6BAEjDmF,IACapF,QAAQC,IAAI,6BAA6BoF,EAAUN,wBAAwBK,KACtF,OAAQ,CAAC3F,IAAI,oBAAoBC,MAAM,WAA6B1B,KAAKyG,mBAAoB,CAAChF,IAAI,qBAAqBC,MAAM,WAA8B1B,KAAKyG,mBAAoB,CAAChF,IAAI,SAASC,MAAM,WAAkB,IAAI6F,EAAOvH,KAAkBA,KAAKyE,MAAMtB,SAAS,OAE7QzC,EAAcuF,EAAEC,cAAc,MAAM,KAAkBxF,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,YAAyB5F,EAAcuF,EAAEC,cAAc,KAAK,CAACC,GAAG,YAAYnG,KAAKkE,MAAMf,UAAUnD,KAAK4F,eAAe5F,KAAKkE,MAAMf,UAAuBzC,EAAcuF,EAAEC,cAAc,MAAM,CAACE,MAAM,CAACoB,MAAM,OAAOC,MAAM,QAAQC,IAAI,SAAaC,GAAIJ,EAAOb,YAAYiB,OAAsBjH,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,iBAA8B5F,EAAcuF,EAAEC,cAAc,OAAO,CAAC0B,SAAS5H,KAAK8E,oBAAiCpE,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB5F,EAAcuF,EAAEC,cAAc,QAAQ,CAAC2B,SAAS7H,KAAK0E,qBAAqBhD,MAAM1B,KAAKyE,MAAMhC,SAAS,GAAGqF,UAAS,EAAK3B,GAAG,qBAAqB4B,KAAK,OAAOC,YAAY,0BAAuCtH,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,6BAA6B2B,cAAc,SAAsBvH,EAAcuF,EAAEC,cAAc,SAAS,CAACC,GAAG,sBAAsBG,UAAU,UAAuB5F,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,oBAAoB2B,cAAc,kBAA2B3D,EAvCllC,CAuCylC5D,EAAcuF,EAAEiC,WACx+BC,EAAmB7G,OAAOJ,EAAoB,EAA3BI,EAA3J,SAAyBmD,GAAO,MAAM,CAACrB,SAASqB,EAAM2D,KAAKhF,SAASD,SAASsB,EAAMhC,QAAQU,YAA+D,CAAgDiB,GAE1NiE,EAAQhI,EAAoB,IAG5BiI,EAAiBjI,EAAoB,KAQrCkI,GALOlI,EAAoB,KAKN,SAAsBmI,EAAUC,GAAmB,OAAOnH,OAAOH,EAA+B,EAAtCG,CAAyC,GAAGkH,EAAU,GAAGC,KAExIC,EAAa,CAACC,MAAM,KAAKvF,SAAS,KAAKwF,MAAM,KAAKC,SAAQ,GAAWC,EAAe,SAAmBrE,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACmE,MAAM,KAAKC,SAAQ,KAAaG,EAAiB,SAAqBvE,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACkE,MAAMI,EAAOJ,MAAMvF,SAAS2F,EAAO3F,SAASwF,MAAM,KAAKC,SAAQ,KAAcI,EAAc,SAAkBxE,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACmE,MAAMG,EAAOH,MAAMC,SAAQ,KAAcK,EAAgB,SAAoBzE,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACkE,MAAM,QAAodP,EAA1b,WAAmB,IAAI3D,EAAM0E,UAAUjG,OAAO,QAAkBkG,IAAfD,UAAU,GAAeA,UAAU,GAAGT,EAAiBK,EAAOI,UAAUjG,OAAO,EAAEiG,UAAU,QAAGC,EAAU,OAAOL,EAAOhB,MAAM,IAJ7uB,aAI6vB,OAAOe,EAAerE,GAAc,IAJnwB,eAIqxB,OAAOuE,EAAiBvE,EAAMsE,GAAQ,IAJ9xB,YAI6yB,OAAOE,EAAcxE,EAAMsE,GAAQ,IAJpzB,cAIq0B,OAAOG,EAAgBzE,GAAc,QAAQ,OAAOA,IAE39B4E,EAAiB,CAACC,kBAAiB,GACnCC,EAAqB,SAA0B9E,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAAC6E,kBAAiB,KACjHE,EAAsB,SAA2B/E,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAAC6E,kBAAiB,KAA4YG,EAAlX,WAAmB,IAAIhF,EAAM0E,UAAUjG,OAAO,QAAkBkG,IAAfD,UAAU,GAAeA,UAAU,GAAGE,EAAqBN,EAAOI,UAAUjG,OAAO,EAAEiG,UAAU,QAAGC,EAAU,OAAOL,EAAOhB,MAAM,IARtL,sBAQ+M,OAAOwB,EAAqB9E,GAAc,IAR1M,uBAQoO,OAAO+E,EAAsB/E,GAAc,QAAQ,OAAOA,IAErdiF,EAAoBrJ,EAAoB,IAGxCsJ,EAAqB,CAACxG,SAAS,GAAGyG,MAAM,IAMxCC,EAAmB,SAAoBpF,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACtB,SAAS,GAAGpB,OAAOT,OAAOoI,EAAmC,EAA1CpI,CAA6CmD,EAAMtB,UAAU,CAAC4F,EAAOtG,aAChLqH,EAAoB,SAAqBrF,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACtB,SAAS4F,EAAO5F,SAAS4G,aAAkBC,EAAiB,SAAkBvF,EAAMsE,GAAQ,OAAOR,EAAqB9D,EAAM,CAACmF,MAAMb,EAAOa,SAA6bK,EAA/Z,WAAmB,IAAIxF,EAAM0E,UAAUjG,OAAO,QAAkBkG,IAAfD,UAAU,GAAeA,UAAU,GAAGQ,EAAyBZ,EAAOI,UAAUjG,OAAO,EAAEiG,UAAU,QAAGC,EAAU,OAAOL,EAAOhB,MAAM,IApB3N,cAoB4O,OAAO8B,EAAmBpF,EAAMsE,GAAQ,IApBrP,eAoBuQ,OAAOe,EAAoBrF,EAAMsE,GAAQ,IApB3Q,oBAoBkS,OAAOiB,EAAiBvF,EAAMsE,GAAQ,QAAQ,OAAOtE,IAEznByF,EAAwB7J,EAAoB,IAG5C8J,EAAmB9J,EAAoB,IAGvC+J,EAAQ/J,EAAoB,IAC5BgK,EAA6BhK,EAAoBM,EAAEyJ,GAGuBE,EAAyB,SAAqBlH,EAASuF,GAAO,MAAM,CAACZ,KAhCtG,eAgCwHY,MAAMA,EAAMvF,SAASA,IAAgBmH,EAAsB,SAAkB3B,GAAO,MAAM,CAACb,KAhCtL,YAgCqMa,MAAMA,IAAa4B,EAAY,WAAiI,OAA/GC,aAAaC,WAAW,SAASD,aAAaC,WAAW,YAAYD,aAAaC,WAAW,kBAAwB,CAAC3C,KAhChV,gBAgCwW4C,EAAiB,SAA0BC,GAAgB,OAAO,SAASC,GAAUvD,YAAW,WAAWuD,EAASL,OAAgC,IAAfI,KAG/kBE,EAAezK,EAAoB,IAKuK0K,EAFxL,WAAsB,OAE5CrK,EAAcuF,EAAEC,cAAcjC,EAAI,KAAkBvD,EAAcuF,EAAEC,cAAc4E,EAA4B,EAAE,CAACE,OAAM,EAAKlJ,KAAK,YAAYuF,UAAUc,MAEnJ8C,EAAO5K,EAAoB,KAG3B6K,EAAO7K,EAAoB,KAc0S8K,EAAqB,SAAsB/H,EAASuF,GAAO,OAAO,SAASkC,GAAUR,EAAcpE,EAAEmF,SAASC,QAAQ,CAACC,eAAe,mBAAmBC,cAAc,SAASxJ,OAAO4G,IAAQ0B,EAAcpE,EAAEuF,IAAI,wCAAwCzJ,OAAOqB,IAAWqI,MAAK,SAASC,GAAK,OAAOb,EAAlV,CAAC9C,KA3DO,oBA2DgB6B,MAA+V8B,EAAInJ,YAECoJ,EAAtoB,SAAiBzH,GAAO,OAAmBxD,EAAcuF,EAAEC,cAAciE,EAAkC,EAAE,CAACyB,GAAG,GAAG7J,OAAOmC,EAAM2H,SAASzF,MAAM,CAAC0F,MAAM,SAAsBpL,EAAcuF,EAAEC,cAAc,KAAK,CAACI,UAAU,WAAwB5F,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB5F,EAAcuF,EAAEC,cAAc,OAAO,CAACI,UAAU,0BAAuC5F,EAAcuF,EAAEC,cAAc,MAAM,CAACM,IAAItC,EAAM6H,OAAOC,IAAI,KAAkBtL,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB5F,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,QAAQpC,EAAM+H,WAEzmBC,EAAqBxL,EAAcuF,EAAEC,cAAc+E,EAAsB,EAAE,CAAClD,KAAK,UAAU3B,MAAM,CAAC+F,SAAS,IAAIjB,MAAK,IAAWkB,EAAiC,SAAS/H,GAAkB/C,OAAOL,EAA0B,EAAjCK,CAAoC+K,EAAUhI,GAAkB,IAAIE,EAAOjD,OAAON,EAA6B,EAApCM,CAAuC+K,GAAW,SAASA,IAAY,IAAIxK,EAAMP,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAKqM,GAAW,IAAI,IAAIC,EAAKnD,UAAUjG,OAAOqJ,EAAK,IAAIC,MAAMF,GAAMG,EAAK,EAAEA,EAAKH,EAAKG,IAAQF,EAAKE,GAAMtD,UAAUsD,GAA6f,OAAtf5K,EAAM0C,EAAOC,KAAKkI,MAAMnI,EAAO,CAACvE,MAAM+B,OAAOwK,KAAa9H,MAAM,CAACkI,WAAU,GAAM9K,EAAM+K,WAAW,WAAW/K,EAAM+C,SAAS,CAAC+H,WAAW9K,EAAM4C,MAAMkI,aAAc9K,EAAMgL,aAAa,SAASxK,GAAGA,EAAE0C,iBAAoBlD,EAAM4C,MAAMkI,WAAW9K,EAAMqC,MAAM4I,MAAMzK,EAAEwC,OAAOzB,SAAS1B,MAAMW,EAAEwC,OAAOkI,SAASrL,OAAOM,QAAQC,IAAII,EAAEwC,OAAOzB,SAAS1B,OAAOM,QAAQC,IAAII,EAAEwC,OAAOkI,SAASrL,QAAaG,EAAMqC,MAAM8I,OAAO3K,EAAEwC,OAAOzB,SAAS1B,MAAMW,EAAEwC,OAAOoI,MAAMvL,MAAMW,EAAEwC,OAAOkI,SAASrL,MAAMW,EAAEwC,OAAOqI,UAAUxL,QAAiBG,EAO2sG,OAPpsGP,OAAOP,EAA6B,EAApCO,CAAuC+K,EAAU,CAAC,CAAC5K,IAAI,qBAAqBC,MAAM,WAA8B,IAAI2F,EAAUrH,KAAKsH,YAAW,WAIvnC,OAAxBD,EAAUnD,MAAMyE,YAAsCS,IAAxB/B,EAAUnD,MAAMyE,OAA6G3G,QAAQC,IAAI,yCACvKoF,EAAU8F,sBADuD9F,EAAUnD,MAAMkJ,aAAa/F,EAAUnD,MAAMd,SAASiE,EAAUnD,MAAMyE,SACrG,OAAQ,CAAClH,IAAI,oBAAoBC,MAAM,WACzE1B,KAAKmN,uBAAwB,CAAC1L,IAAI,mBAAmBC,MAAM,WAA4B1B,KAAKkE,MAAMmJ,YAAa,CAAC5L,IAAI,SAASC,MAAM,WAAkB,IAAIoF,EAAO9G,KAASsN,EAAYtN,KAAKkE,MAAM0F,MAAM9D,KAAI,SAASyH,GACnN,OAAmB7M,EAAcuF,EAAEC,cAAcyF,EAAmB,CAAClK,IAAI8L,EAAEpH,GAAG8F,KAAK,iBAAiBF,OAAO,8CAA8CyB,OAAO,OAAO3B,QAAQ,IAAI9J,OAAOwL,EAAEpH,SAAS,OAAmBzF,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,aAA0BzF,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,WAAwBzF,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,QAAqB5F,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,cAAcK,IAAI,6CAA6CF,UAAU,SAAS0F,IAAI,KAAkBtL,EAAcuF,EAAEC,cAAc,IAAI,KAAK,aAA0BxF,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,mCAAmC2B,cAAc,SAAsBvH,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,kBAA+BzF,EAAcuF,EAAEC,cAAc,KAAK,KAAkBxF,EAAcuF,EAAEC,cAAc,KAAK,CAACC,GAAG,gBAAgBG,UAAU,UAAuB5F,EAAcuF,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB5F,EAAcuF,EAAEC,cAAc,IAAI,KAAK,WAAwBxF,EAAcuF,EAAEC,cAAc,KAAK,CAACC,GAAG,eAA4BzF,EAAcuF,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB5F,EAAcuF,EAAEC,cAAc,IAAI,KAAK,SAAsBxF,EAAcuF,EAAEC,cAAc,KAAK,CAACC,GAAG,eAA4BzF,EAAcuF,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB5F,EAAcuF,EAAEC,cAAc,IAAI,KAAK,SAAsBxF,EAAcuF,EAAEC,cAAc,KAAK,CAACC,GAAG,kBAA+BzF,EAAcuF,EAAEC,cAAc,OAAO,CAACI,UAAU,kBAAkB,IAAiB5F,EAAcuF,EAAEC,cAAc,IAAI,KAAK,cAA2BxF,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,YAAYnG,KAAKkE,MAAM2E,QAAqBnI,EAAcuF,EAAEC,cAAcgF,EAAsB,EAAE,CAACuC,UAAUvB,IAAUlM,KAAKkE,MAAMwJ,gBAA6BhN,EAAcuF,EAAEC,cAAc,SAAS,CAACyH,QAAQ,WAAmB,OAAO7G,EAAO5C,MAAM0J,UAAWtH,UAAU,WAAwB5F,EAAcuF,EAAEC,cAAc,OAAO,KAAK,WAAwBxF,EAAcuF,EAAEC,cAAc,MAAM,KAAkBxF,EAAcuF,EAAEC,cAAc,OAAO,CAAC2H,OAAO,OAAOjG,SAAS5H,KAAK6M,cAAc7M,KAAKyE,MAAMkI,UAAuBjM,EAAcuF,EAAEC,cAAc,MAAM,KAAkBxF,EAAcuF,EAAEC,cAAc,QAAQ,CAAC+F,KAAK,WAAWlE,KAAK,OAAOC,YAAY,aAA0BtH,EAAcuF,EAAEC,cAAc,QAAQ,CAAC+F,KAAK,WAAWlE,KAAK,WAAWC,YAAY,cAA2BtH,EAAcuF,EAAEC,cAAc,MAAM,KAAkBxF,EAAcuF,EAAEC,cAAc,QAAQ,CAAC+F,KAAK,WAAWlE,KAAK,OAAOC,YAAY,aAA0BtH,EAAcuF,EAAEC,cAAc,QAAQ,CAAC+F,KAAK,QAAQlE,KAAK,QAAQC,YAAY,UAAuBtH,EAAcuF,EAAEC,cAAc,QAAQ,CAAC+F,KAAK,WAAWlE,KAAK,WAAWC,YAAY,aAA0BtH,EAAcuF,EAAEC,cAAc,QAAQ,CAAC+F,KAAK,YAAYlE,KAAK,WAAWC,YAAY,sBAAmCtH,EAAcuF,EAAEC,cAAc,SAAS,CAAC6B,KAAK,UAAU,iBAA8BrH,EAAcuF,EAAEC,cAAc,SAAS,CAACyH,QAAQ3N,KAAK4M,YAAY,cAA2BlM,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,UAAuBzF,EAAcuF,EAAEC,cAAc,QAAQ,CAAC4H,QAAQ,IAAiBpN,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,eAAe2B,cAAc,UAAuBvH,EAAcuF,EAAEC,cAAc,QAAQ,CAAC6B,KAAK,OAAOC,YAAY,wBAAqCtH,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,YAAyBzF,EAAcuF,EAAEC,cAAc,KAAK,KAAKoH,IAA2B5M,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,cAA2BzF,EAAcuF,EAAEC,cAAc,SAAS,CAACC,GAAG,aAAawH,QAAQ,WAAmB,OAAO7G,EAAOiH,qBAAmCrN,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,wBAAwB2B,cAAc,SAAsBvH,EAAcuF,EAAEC,cAAc,OAAO,KAAK,aAA0BxF,EAAcuF,EAAEC,cAAc,SAAS,CAACC,GAAG,YAAyBzF,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,kBAAkB2B,cAAc,SAAsBvH,EAAcuF,EAAEC,cAAc,OAAO,KAAK,mBAA2BmG,EAPxiI,CAOojI3L,EAAcuF,EAAEiC,WACxoH8F,EAAwB1M,OAAOJ,EAAoB,EAA3BI,EADypH,SAAyBmD,GAAO,MAAM,CAACiJ,gBAAmC,OAAnBjJ,EAAM2D,KAAKO,MAAaE,QAAQpE,EAAM2D,KAAKS,QAAQF,MAAMlE,EAAM2D,KAAKO,MAAMvF,SAASqB,EAAM2D,KAAKhF,SACt6IwG,MAAMnF,EAAMhC,QAAQmH,UAA0C,SAA4BiB,GAAU,MAAM,CAACiC,MAAM,SAAemB,EAASlB,GAAU,OAAOlC,EAvCqe,SAAmBzH,EAAS2J,GAAU,OAAO,SAASlC,GAAUA,EAAzoB,CAAC9C,KAhCxC,eAiCfsC,EAAcpE,EAAEiI,KAAK,yCAAyC,CAAC9K,SAASA,EAAS2J,SAASA,IAAWtB,MAAK,SAASC,GAAK,IAAI/C,EAAM+C,EAAInJ,KAAKd,IAAQ0M,EAAe,IAAIzI,MAAK,IAAIA,MAAOC,UAAU,MAAW8E,aAAa2D,QAAQ,QAAQzF,GAAO8B,aAAa2D,QAAQ,WAAWhL,GAAUqH,aAAa2D,QAAQ,iBAAiBD,GAAgBtD,EAASP,EAAyBlH,EAASuF,IAAQkC,EAASF,EAAiB,UAAU0D,OAAM,SAASxK,GAAKgH,EAASN,EAAsB1G,QAsCtTyK,CAAeL,EAASlB,KAAaa,OAAO,WAAkB,OAAO/C,EAASL,MAAiBwC,OAAO,SAAgB5J,EAAS6J,EAAMsB,EAAUrB,GAAW,OAAOrC,EAtCsL,SAAoBzH,EAAS6J,EAAMsB,EAAUrB,GAAW,OAAO,SAASrC,GAAUA,EADthB,CAAC9C,KAhCxC,eAiCgmBsC,EAAcpE,EAAEiI,KAAK,gDAAgD,CAAC9K,SAASA,EAAS6J,MAAMA,EAAMsB,UAAUA,EAAUrB,UAAUA,IAAYzB,MAAK,SAASC,GAAK,IAAI/C,EAAM+C,EAAInJ,KAAKd,IAAQ0M,EAAe,IAAIzI,MAAK,IAAIA,MAAOC,UAAU,MAAW8E,aAAa2D,QAAQ,QAAQzF,GAAO8B,aAAa2D,QAAQ,WAAWhL,GAAUqH,aAAa2D,QAAQ,iBAAiBD,GAAgBtD,EAASP,EAAyBlH,EAASuF,IAAQkC,EAASF,EAAiB,UAAU0D,OAAM,SAASxK,GAAKgH,EAASN,EAAsB1G,QAsCpyB2K,CAAgBpL,EAAS6J,EAAMsB,EAAUrB,KAAcG,QAAQ,WAAmB,OAAOxC,EAvBnW,CAAC9C,KAhDwE,yBAuEqUqF,aAAa,SAAsBhK,EAASuF,GAAO,OAAOkC,EAASM,EAAqB/H,EAASuF,QAAqE,CAAuFyD,GAE1sBqC,GAA6B,SAASpK,GAAkB/C,OAAOL,EAA0B,EAAjCK,CAAoCoN,EAAQrK,GAAkB,IAAIE,EAAOjD,OAAON,EAA6B,EAApCM,CAAuCoN,GAAS,SAASA,IAAkE,OAAxDpN,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAK0O,GAAgBnK,EAAOmI,MAAM1M,KAAKmJ,WAGiiB,OAHrhB7H,OAAOP,EAA6B,EAApCO,CAAuCoN,EAAQ,CAAC,CAACjN,IAAI,SAASC,MAAM,WAAkB,OAAsB,OAAnB1B,KAAKkE,MAAMyE,MAGtXjI,EAAcuF,EAAEC,cAAc4E,EAA+B,EAAE,CAACc,GAAG,MAA0BlL,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,mBAAyC,OAAtBtG,KAAKkE,MAAMd,SAA6B1C,EAAcuF,EAAEC,cAAcjC,EAAI,KAAkBvD,EAAcuF,EAAEC,cAAc,MAAM,CAACM,IAAI,kDAAkDwF,IAAI,KAAkBtL,EAAcuF,EAAEC,cAAc,IAAI,KAAKlG,KAAKkE,MAAMd,UAAuB1C,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,gBAA6B5F,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,iBAAiB2B,cAAc,SAAsBvH,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,gBAAgB2B,cAAc,SAAsBvH,EAAcuF,EAAEC,cAAc,IAAI,CAACI,UAAU,kBAAkB2B,cAAc,WAAW,UAAkByG,EAHhyB,CAG0yBhO,EAAcuF,EAAEiC,WAChyByG,GAAsBrN,OAAOJ,EAAoB,EAA3BI,EADizB,SAAyBmD,GAAO,MAAM,CAACrB,SAASqB,EAAM2D,KAAKhF,SAC77BuF,MAAMlE,EAAM2D,KAAKO,SAA+D,CAAwD8F,IAEpIG,GAAQvO,EAAoB,KAG5BwO,GAAYxO,EAAoB,KAGhCyO,GAAYzO,EAAoB,IAGhC0O,GAAU1O,EAAoB,KAG9B2O,GAASD,GAAyB,EAAEE,KAAwH,IAAIC,GAAwC,SAAS7K,GAAkB/C,OAAOL,EAA0B,EAAjCK,CAAoC6N,EAAsB9K,GAAkB,IAAIE,EAAOjD,OAAON,EAA6B,EAApCM,CAAuC6N,GAAuB,SAASA,IAAwB,IAAItN,EAAMP,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAKmP,GAAuB,IAAI,IAAI7C,EAAKnD,UAAUjG,OAAOqJ,EAAK,IAAIC,MAAMF,GAAMG,EAAK,EAAEA,EAAKH,EAAKG,IAAQF,EAAKE,GAAMtD,UAAUsD,GAYthB,OAZ6hB5K,EAAM0C,EAAOC,KAAKkI,MAAMnI,EAAO,CAACvE,MAAM+B,OAAOwK,KAAa9H,MAAM,CAAC2K,UAAU,GAAGxG,MAAM,MAAM/G,EAAMwN,aAAa,SAAS3N,GAAOG,EAAM+C,SAAS,CAACwK,UAAU1N,KAAUG,EAAMyN,aAAa,SAASjN,GAClxB,IAAI+M,EAAUvN,EAAM4C,MAAM2K,UAAU/M,EAAE0C,iBAAiBlD,EAAMqC,MAAMqL,KAAKC,gBAAe,SAAS3L,EAAI4L,GAAQ,IAAI5L,EAAI,CACpH,IAAI6L,EAAS,GAAG3N,OAAOT,OAAOoI,EAAmC,EAA1CpI,CAA6C8N,GAAW,CAACvN,EAAMqC,MAAMd,WAAWpB,QAAQC,IAAIyN,GAAUrF,EAAcpE,EAAEmF,SAASC,QAAQ,CAACC,eAAe,mBAAmBC,cAAc,SAASxJ,OAAOF,EAAMqC,MAAMyE,QAAQ0B,EAAcpE,EAAEiI,KAAK,qCAAqC,CAAC/K,SAAS,GAAGwM,aAAaD,IAAWjE,MAAK,SAASC,GAKhW7J,EAAMqC,MAAM0L,QAAQ3P,KAAK,IAAI8B,OAAO2J,EAAInJ,KAAK4D,KAE7CtE,EAAMqC,MAAM2L,oBAEZhO,EAAMqC,MAAMkJ,aAAavL,EAAMqC,MAAMd,SAASvB,EAAMqC,MAAMyE,UAAU0F,OAAM,SAASxK,GACnF7B,QAAQ4G,MAAM/E,GAAKhC,EAAM+C,SAAS,CAACgE,MAAM/E,YAAsBhC,EAGwT,OAHjTP,OAAOP,EAA6B,EAApCO,CAAuC6N,EAAsB,CAAC,CAAC1N,IAAI,oBACzIC,MAAM,WAA6B1B,KAAKkE,MAAMqL,KAAKC,mBAAoB,CAAC/N,IAAI,SAASC,MAAM,WAAkB,IAb7CoO,EAaiDC,EAAiB/P,KAAKkE,MAAMqL,KAAKS,EAAkBD,EAAiBC,kBAAkBC,EAAeF,EAAiBE,eAAeC,EAAcH,EAAiBG,cACjRC,GAAcC,EADgSL,EAAiBK,gBAClS,aAAaF,EAAc,YAAY,OAAmBxP,EAAcuF,EAAEC,cAAc6I,GAAyB,EAAE,CAACsB,OAAO,SAASzI,SAAS5H,KAAKsP,cAActP,KAAKyE,MAAMmE,MAAM,GAAG7G,OAAO/B,KAAKyE,MAAMmE,OAAO,KAAkBlI,EAAcuF,EAAEC,cAAc8I,GAAS,CAACsB,eAAeH,EAAc,QAAQ,GAAGI,KAAKJ,GAAe,IAAIH,EAAkB,WAAW,CAACQ,MAAM,CAAC,CAAC1I,UAAS,EAAKrF,QAAQ,mEAA5DuN,CACxWtP,EAAcuF,EAAEC,cAAc2I,GAA2B,EAAE,CAAC4B,KAAK,OAAOrK,MAAM,CAACsK,MAAM,QAAQ1I,YAAY,YAAYH,SAAS7H,KAAKqP,cAAc,MAAmB3O,EAAcuF,EAAEC,cAAc8I,GAAS,KAAkBtO,EAAcuF,EAAEC,cAAc4I,GAA2B,EAAE,CAAC/G,KAAK,UAAU4I,SAAS,SAASC,UAf1Pd,EAe6QG,IAfzP3O,OAAO2B,KAAK6M,GAAae,MAAK,SAASC,GAAO,OAAOhB,EAAYgB,QAe2M,sBAA8B3B,EAflL,CAe0MzO,EAAcuF,EAAEiC,WAAe6I,GAAYhC,GAAyB,EAAEiC,QAA3BjC,CAAoCG,IACtV+B,GAAQ3P,OAAOwJ,EAAiC,EAAzC,CAA4CxJ,OAAOJ,EAAoB,EAA3BI,EADwV,SAAyBmD,GAAO,MAAM,CAACkE,MAAMlE,EAAM2D,KAAKO,MAAMvF,SAASqB,EAAM2D,KAAKhF,aAAwC,SAA4ByH,GAAU,MAAM,CAACgF,kBAAkB,WAA6B,OAAOhF,EA1DllB,CAAC9C,KAhDqB,0BA2G3LqF,aAAa,SAAsBhK,EAASuF,GAAO,OAAOkC,EAASM,EAAqB/H,EAASuF,QAAiGrH,CAA4EyP,KAGgdG,GAA1rB,SAAS7M,GAAkB/C,OAAOL,EAA0B,EAAjCK,CAAoC6P,EAAa9M,GAAkB,IAAIE,EAAOjD,OAAON,EAA6B,EAApCM,CAAuC6P,GAAc,SAASA,IAA4E,OAA7D7P,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAKmR,GAAqB5M,EAAOmI,MAAM1M,KAAKmJ,WAA4V,OAAhV7H,OAAOP,EAA6B,EAApCO,CAAuC6P,EAAa,CAAC,CAAC1P,IAAI,SAASC,MAAM,WAA8C,OAA5BM,QAAQC,IAAI,gBAAmCvB,EAAcuF,EAAEC,cAAc0I,GAAuB,EAAE,CAACwC,UAAS,EAAKC,OAAO,KAAKC,QAAQtR,KAAKkE,MAAMqN,UAAUC,SAASxR,KAAKkE,MAAMtB,OAAoBlC,EAAcuF,EAAEC,cAAc+K,GAAK,WAAmBE,EAA/mB,CAA8nBzQ,EAAcuF,EAAEiC,WAsC9qBuJ,GAAqB,SAASpN,GAAkB/C,OAAOL,EAA0B,EAAjCK,CAAoCoQ,EAAIrN,GAAkB,IAAIE,EAAOjD,OAAON,EAA6B,EAApCM,CAAuCoQ,GAA+I,SAASA,EAAIxN,GAAO,IAAIrC,EAA2R,OAArRP,OAAOR,EAAgC,EAAvCQ,CAA0CtB,KAAK0R,GAAK7P,EAAM0C,EAAOC,KAAKxE,KAAKkE,GAAOH,EAAU4N,aAAa9P,EAAMqC,MAAM0N,YAAYC,KAAKvQ,OAAO4I,EAAuC,EAA9C5I,CAAiDO,IAAQA,EAAMqC,MAAM4N,WAAWD,KAAKvQ,OAAO4I,EAAuC,EAA9C5I,CAAiDO,KAAgBA,EAAmrB,OAAvnCP,OAAOP,EAA6B,EAApCO,CAAuCoQ,EAAI,CAAC,CAACjQ,IAAI,oBAAoBC,MAAM,WAA6B1B,KAAKkE,MAAM6N,sBAAwVzQ,OAAOP,EAA6B,EAApCO,CAAuCoQ,EAAI,CAAC,CAACjQ,IAAI,SAASC,MAAM,WAAkB,IAAIoF,EAAO9G,KAAK,OAAmBU,EAAcuF,EAAEC,cAAciE,EAAwC,EAAE,KAAkBzJ,EAAcuF,EAAEC,cAAc,MAAM,CAACC,GAAG,SAAsBzF,EAAcuF,EAAEC,cAAc8H,EAAqB,MAAmBtN,EAAcuF,EAAEC,cAAc,MAAM,CAACI,UAAU,WAAwB5F,EAAcuF,EAAEC,cAAcgL,GAAM,CAACK,UAAUvR,KAAKkE,MAAMoF,iBAAiB1G,MAAM,WAAiB,OAAOkE,EAAO5C,MAAM2L,uBAAqCnP,EAAcuF,EAAEC,cAAcyI,GAAmB,MAAmBjO,EAAcuF,EAAEC,cAAc6E,EAAO,aAAqB2G,EAA1wC,CAAgxChR,EAAcuF,EAAEiC,WAC15B8J,GAAW1Q,OAAOJ,EAAoB,EAA3BI,EADk7B,SAAyBmD,GAAO,MAAM,CAAC6E,iBAAiB7E,EAAMgF,IAAIH,iBAAiB2I,cAAcxN,EAAM2D,KAAKO,UAAoC,SAA4BkC,GACxgD,MAAM,CAACkH,gBAAgB,WAA2B,OAAOlH,GApHynC,SAASA,GAAU,IAAIlC,EAAM8B,aAAayH,QAAQ,SAAa9O,EAASqH,aAAayH,QAAQ,YAAY,QAAW9I,IAART,EAAmBkC,EAASL,SAAoB,CAAC,IAAI2D,EAAe,IAAIzI,KAAK+E,aAAayH,QAAQ,mBAAsB/D,GAAgB,IAAIzI,KAAQmF,EAASL,MAAqBK,EAASP,EAAyBlH,EAASuF,IAAQkC,EAASF,GAAkBwD,EAAexI,WAAU,IAAID,MAAOC,WAAW,YAoHv/CkK,kBAAkB,WAA6B,OAAOhF,EArGyB,CAAC9C,KAhDqB,0BAqJH+J,WAAW,SAAoBrP,GAAS,OAAOoI,EA1FxM,SAAoBpI,GAAS,MAAM,CAACsF,KA3D+J,cA2D9ItF,QAAQA,GA0FoJ0P,CAA2B1P,KAAYmP,YAAY,SAAqBzO,GAAU,OAAO0H,EA1FlM,SAAqB1H,GAAU,MAAM,CAAC4E,KA3DoF,eA2DlE5E,SAASA,GA0F0IiP,CAA4BjP,QAA2D,CAA2EsO,IAIhfY,GAAiBC,OAAOC,sCAAsClK,EAAuB,EAO3E,IAAImK,GAPyE,WAA0B,IAAIC,EAAYnR,OAAO+G,EAA+B,EAAtC/G,CAAyC,CAAC8G,KAAKA,EAAKqB,IAAIA,EAAIhH,QAAQwH,IAOzM,OAPsO3I,OAAO+G,EAA2B,EAAlC/G,CACtOmR,EAAYJ,GAAiB/Q,OAAO+G,EAA+B,EAAtC/G,CAAyCgH,EAAgC,KAM1EoK,GAAqBC,GAAiBjS,EAAcuF,EAAEC,cAAchF,EAAqB,EAAE,CAAC0R,MAAMJ,IAAwB9R,EAAcuF,EAAEC,cAAc8L,GAAQ,OAAOnR,EAAkBoF,EAAE4M,OAAOF,GAAIG,SAASC,eAAe,UAIxP,CAAC,CAAC,IAAI,EAAE"},"code":"(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{176:function(e,t,a){e.exports=a(350)},350:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),r=a(4),o=a.n(r),c=a(15),l=a(10),i=a(25),u=a(26),m=a(24),p=a(94),h=function(){function e(){Object(c.a)(this,e),this.callbacks={},this.socketRef=null}return Object(l.a)(e,null,[{key:\"getInstance\",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(l.a)(e,[{key:\"connect\",value:function(e){var t=this,a=\"ws://127.0.0.1:8000/ws/chat/\".concat(e,\"/\");console.log(a),this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log(\"websocket open\")},this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.message)},this.socketRef.onclose=function(){console.log(\"websocket is closed\"),t.connect()}}},{key:\"disconnect\",value:function(){this.socketRef.close()}},{key:\"socketNewMessage\",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&(\"messages\"===a&&this.callbacks[a](t.messages),console.log(this),\"new_message\"===a&&this.callbacks[a](t.message),console.log(this))}},{key:\"fetchMessages\",value:function(e,t){this.sendMessage({command:\"fetch_messages\",username:e,chatId:t}),console.log(t),console.log(e)}},{key:\"newChatMessage\",value:function(e){this.sendMessage({command:\"new_message\",from:e.from,message:e.content,chatId:e.chatId}),console.log(e)}},{key:\"addCallbacks\",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:\"sendMessage\",value:function(e){try{this.socketRef.send(JSON.stringify(Object(p.a)({},e)))}catch(t){console.log(t.message)}}},{key:\"state\",value:function(){return this.socketRef.readyState}}]),e}();h.instance=null;var d=h.getInstance(),f=function(e){return e.children},g=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={messages:[]},n.messageChangeHandler=function(e){n.setState({message:e.target.value})},n.sendMessageHandler=function(e){e.preventDefault();var t={from:n.props.username,content:n.state.message,chatId:n.props.match.params.chatID};d.newChatMessage(t),n.setState({message:[]})},n.renderTimestamp=function(e){var t=Math.round(((new Date).getTime()-new Date(e).getTime())/6e4);return t<1?\"just now...\":t<60&&t>1?\"\".concat(t,\" minutes ago\"):t<1440&&t>60?\"\".concat(Math.round(t/60),\" hours ago\"):t<44640&&t>1440?\"\".concat(Math.round(t/1440),\" days ago\"):\"\".concat(new Date(e))},n.renderMessages=function(e){var t=n.props.username;return e.map((function(e,a,r){return s.a.createElement(\"li\",{key:e.id,style:{marginBottom:r.length-1===a?\"300px\":\"15px\"},className:e.author===t?\"replies\":\"sent\"},s.a.createElement(\"img\",{src:\"http://emilcarlsson.se/assets/mikeross.png\"}),s.a.createElement(\"p\",null,e.content,s.a.createElement(\"br\",null),s.a.createElement(\"small\",null,n.renderTimestamp(e.timestamp))))}))},n.scrollToBottom=function(){n.messagesEnd.scrollIntoView({behavior:\"smooth\"})},n.initialiseChat(),n}return Object(l.a)(a,[{key:\"initialiseChat\",value:function(){var e=this;this.waitForSocketConnection((function(){d.fetchMessages(e.props.username,e.props.match.params.chatID)})),d.connect(this.props.match.params.chatID)}}]),Object(l.a)(a,[{key:\"componentWillReceiveProps\",value:function(e){var t=this;console.log(e),this.props.match.params.chatID!==e.match.params.chatID&&(d.disconnect(),this.waitForSocketConnection((function(){d.fetchMessages(t.props.username,e.match.params.chatID)})),d.connect(e.match.params.chatID))}},{key:\"waitForSocketConnection\",value:function(e){var t=this;setTimeout((function(){if(1===d.state())return console.log(\"connection is secure\"),void e();console.log(\"waiting for connection...\"),t.waitForSocketConnection(e)}),100)}},{key:\"componentDidMount\",value:function(){this.scrollToBottom()}},{key:\"componentDidUpdate\",value:function(){this.scrollToBottom()}},{key:\"render\",value:function(){var e=this;this.state.messages;return s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"messages\"},s.a.createElement(\"ul\",{id:\"chat-log\"},this.props.messages&&this.renderMessages(this.props.messages),s.a.createElement(\"div\",{style:{float:\"left\",clear:\"both\"},ref:function(t){e.messagesEnd=t}}))),s.a.createElement(\"div\",{className:\"message-input\"},s.a.createElement(\"form\",{onSubmit:this.sendMessageHandler},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"input\",{onChange:this.messageChangeHandler,value:this.state.message||\"\",required:!0,id:\"chat-message-input\",type:\"text\",placeholder:\"Write your message...\"}),s.a.createElement(\"i\",{className:\"fa fa-paperclip attachment\",\"aria-hidden\":\"true\"}),s.a.createElement(\"button\",{id:\"chat-message-submit\",className:\"submit\"},s.a.createElement(\"i\",{className:\"fa fa-paper-plane\",\"aria-hidden\":\"true\"}))))))}}]),a}(s.a.Component),E=Object(m.b)((function(e){return{username:e.auth.username,messages:e.message.messages}}))(g),v=a(52),b=a(150),k=(a(185),function(e,t){return Object(p.a)({},e,{},t)}),y={token:null,username:null,error:null,loading:!1},w=function(e,t){return k(e,{error:null,loading:!0})},S=function(e,t){return k(e,{token:t.token,username:t.username,error:null,loading:!1})},O=function(e,t){return k(e,{error:t.error,loading:!1})},C=function(e,t){return k(e,{token:null})},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"AUTH_START\":return w(e);case\"AUTH_SUCCESS\":return S(e,t);case\"AUTH_FAIL\":return O(e,t);case\"AUTH_LOGOUT\":return C(e);default:return e}},T={showAddChatPopup:!1},j=function(e,t){return k(e,{showAddChatPopup:!0})},D=function(e,t){return k(e,{showAddChatPopup:!1})},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"OPEN_AND_CHAT_POPUP\":return j(e);case\"CLOSE_ADD_CHAT_POPUP\":return D(e);default:return e}},_=a(93),P={messages:[],chats:[]},I=function(e,t){return k(e,{messages:[].concat(Object(_.a)(e.messages),[t.message])})},M=function(e,t){return k(e,{messages:t.messages.reverse()})},U=function(e,t){return k(e,{chats:t.chats})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case\"ADD_MESSAGE\":return I(e,t);case\"SET_MESSAGES\":return M(e,t);case\"GET_CHATS_SUCCESS\":return U(e,t);default:return e}},H=a(65),R=a(47),x=a(33),L=a.n(x),G=function(e,t){return{type:\"AUTH_SUCCESS\",token:t,username:e}},B=function(e){return{type:\"AUTH_FAIL\",error:e}},J=function(){return localStorage.removeItem(\"token\"),localStorage.removeItem(\"username\"),localStorage.removeItem(\"expirationDate\"),{type:\"AUTH_LOGOUT\"}},V=function(e){return function(t){setTimeout((function(){t(J())}),1e3*e)}},z=a(44),W=function(){return s.a.createElement(f,null,s.a.createElement(z.b,{exact:!0,path:\"/:chatID/\",component:E}))},q=a(353),X=a(354),K=function(e,t){return function(a){L.a.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(t)},L.a.get(\"http://127.0.0.1:8000/chat/?username=\".concat(e)).then((function(e){return a({type:\"GET_CHATS_SUCCESS\",chats:e.data})}))}},Q=function(e){return s.a.createElement(R.b,{to:\"\".concat(e.chatURL),style:{color:\"#fff\"}},s.a.createElement(\"li\",{className:\"contact\"},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"span\",{className:\"contact-status online\"}),s.a.createElement(\"img\",{src:e.picURL,alt:\"\"}),s.a.createElement(\"div\",{className:\"meta\"},s.a.createElement(\"p\",{className:\"name\"},e.name)))))},Y=s.a.createElement(q.a,{type:\"loading\",style:{fontSize:24},spin:!0}),Z=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={loginForm:!0},e.changeForm=function(){e.setState({loginForm:!e.state.loginForm})},e.authenticate=function(t){t.preventDefault(),e.state.loginForm?(e.props.login(t.target.username.value,t.target.password.value),console.log(t.target.username.value),console.log(t.target.password.value)):e.props.signup(t.target.username.value,t.target.email.value,t.target.password.value,t.target.password2.value)},e}return Object(l.a)(a,[{key:\"waitForAuthDetails\",value:function(){var e=this;setTimeout((function(){null===e.props.token||void 0===e.props.token?(console.log(\"waiting for authentication details...\"),e.waitForAuthDetails()):e.props.getUserChats(e.props.username,e.props.token)}),100)}},{key:\"componentDidMount\",value:function(){this.waitForAuthDetails()}},{key:\"openAddChatPopup\",value:function(){this.props.addChat()}},{key:\"render\",value:function(){var e=this,t=this.props.chats.map((function(e){return s.a.createElement(Q,{key:e.id,name:\"Harvey Specter\",picURL:\"http://emilcarlsson.se/assets/louislitt.png\",status:\"busy\",chatURL:\"/\".concat(e.id)})}));return s.a.createElement(\"div\",{id:\"sidepanel\"},s.a.createElement(\"div\",{id:\"profile\"},s.a.createElement(\"div\",{className:\"wrap\"},s.a.createElement(\"img\",{id:\"profile-img\",src:\"http://emilcarlsson.se/assets/mikeross.png\",className:\"online\",alt:\"\"}),s.a.createElement(\"p\",null,\"Mike Ross\"),s.a.createElement(\"i\",{className:\"fa fa-chevron-down expand-button\",\"aria-hidden\":\"true\"}),s.a.createElement(\"div\",{id:\"status-options\"},s.a.createElement(\"ul\",null,s.a.createElement(\"li\",{id:\"status-online\",className:\"active\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Online\")),s.a.createElement(\"li\",{id:\"status-away\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Away\")),s.a.createElement(\"li\",{id:\"status-busy\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Busy\")),s.a.createElement(\"li\",{id:\"status-offline\"},s.a.createElement(\"span\",{className:\"status-circle\"}),\" \",s.a.createElement(\"p\",null,\"Offline\")))),s.a.createElement(\"div\",{id:\"expanded\"},this.props.loading?s.a.createElement(X.a,{indicator:Y}):this.props.isAuthenticated?s.a.createElement(\"button\",{onClick:function(){return e.props.logout()},className:\"authBtn\"},s.a.createElement(\"span\",null,\"Logout\")):s.a.createElement(\"div\",null,s.a.createElement(\"form\",{method:\"POST\",onSubmit:this.authenticate},this.state.loginForm?s.a.createElement(\"div\",null,s.a.createElement(\"input\",{name:\"username\",type:\"text\",placeholder:\"username\"}),s.a.createElement(\"input\",{name:\"password\",type:\"password\",placeholder:\"password\"})):s.a.createElement(\"div\",null,s.a.createElement(\"input\",{name:\"username\",type:\"text\",placeholder:\"username\"}),s.a.createElement(\"input\",{name:\"email\",type:\"email\",placeholder:\"email\"}),s.a.createElement(\"input\",{name:\"password\",type:\"password\",placeholder:\"password\"}),s.a.createElement(\"input\",{name:\"password2\",type:\"password\",placeholder:\"password confirm\"})),s.a.createElement(\"button\",{type:\"submit\"},\"Authenticate\")),s.a.createElement(\"button\",{onClick:this.changeForm},\"Switch\"))))),s.a.createElement(\"div\",{id:\"search\"},s.a.createElement(\"label\",{htmlFor:\"\"},s.a.createElement(\"i\",{className:\"fa fa-search\",\"aria-hidden\":\"true\"})),s.a.createElement(\"input\",{type:\"text\",placeholder:\"Search contacts...\"})),s.a.createElement(\"div\",{id:\"contacts\"},s.a.createElement(\"ul\",null,t)),s.a.createElement(\"div\",{id:\"bottom-bar\"},s.a.createElement(\"button\",{id:\"addcontact\",onClick:function(){return e.openAddChatPopup()}},s.a.createElement(\"i\",{className:\"fa fa-user-plus fa-fw\",\"aria-hidden\":\"true\"}),s.a.createElement(\"span\",null,\"Add Chat\")),s.a.createElement(\"button\",{id:\"settings\"},s.a.createElement(\"i\",{className:\"fa fa-cog fa-fw\",\"aria-hidden\":\"true\"}),s.a.createElement(\"span\",null,\"Settings\"))))}}]),a}(s.a.Component),$=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token,loading:e.auth.loading,token:e.auth.token,username:e.auth.username,chats:e.message.chats}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:\"AUTH_START\"}),L.a.post(\"http://127.0.0.1:8000/rest-auth/login/\",{username:e,password:t}).then((function(t){var n=t.data.key,s=new Date((new Date).getTime()+36e5);localStorage.setItem(\"token\",n),localStorage.setItem(\"username\",e),localStorage.setItem(\"expirationDate\",s),a(G(e,n)),a(V(3600))})).catch((function(e){a(B(e))}))}}(t,a))},logout:function(){return e(J())},signup:function(t,a,n,s){return e(function(e,t,a,n){return function(s){s({type:\"AUTH_START\"}),L.a.post(\"http://127.0.0.1:8000/rest-auth/registration/\",{username:e,email:t,password1:a,password2:n}).then((function(t){var a=t.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem(\"token\",a),localStorage.setItem(\"username\",e),localStorage.setItem(\"expirationDate\",n),s(G(e,a)),s(V(3600))})).catch((function(e){s(B(e))}))}}(t,a,n,s))},addChat:function(){return e({type:\"OPEN_AND_CHAT_POPUP\"})},getUserChats:function(t,a){return e(K(t,a))}}}))(Z),ee=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:\"render\",value:function(){return null===this.props.token?s.a.createElement(z.a,{to:\"/\"}):s.a.createElement(\"div\",{className:\"contact-profile\"},null!==this.props.username?s.a.createElement(f,null,s.a.createElement(\"img\",{src:\"http://emilcarlsson.se/assets/harveyspecter.png\",alt:\"\"}),s.a.createElement(\"p\",null,this.props.username),s.a.createElement(\"div\",{className:\"social-media\"},s.a.createElement(\"i\",{className:\"fa fa-facebook\",\"aria-hidden\":\"true\"}),s.a.createElement(\"i\",{className:\"fa fa-twitter\",\"aria-hidden\":\"true\"}),s.a.createElement(\"i\",{className:\"fa fa-instagram\",\"aria-hidden\":\"true\"}))):null)}}]),a}(s.a.Component),te=Object(m.b)((function(e){return{username:e.auth.username,token:e.auth.token}}))(ee),ae=a(356),ne=a(357),se=a(69),re=a(355),oe=re.a.Item;var ce=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={usernames:[],error:null},e.handleChange=function(t){e.setState({usernames:t})},e.handleSubmit=function(t){var a=e.state.usernames;t.preventDefault(),e.props.form.validateFields((function(t,n){if(!t){var s=[].concat(Object(_.a)(a),[e.props.username]);console.log(s),L.a.defaults.headers={\"Content-Type\":\"application/json\",Authorization:\"Token \".concat(e.props.token)},L.a.post(\"http://127.0.0.1:8000/chat/create/\",{messages:[],participants:s}).then((function(t){e.props.history.push(\"/\".concat(t.data.id)),e.props.closeAddChatPopup(),e.props.getUserChats(e.props.username,e.props.token)})).catch((function(t){console.error(t),e.setState({error:t})}))}}))},e}return Object(l.a)(a,[{key:\"componentDidMount\",value:function(){this.props.form.validateFields()}},{key:\"render\",value:function(){var e,t=this.props.form,a=t.getFieldDecorator,n=t.getFieldsError,r=t.getFieldError,o=(0,t.isFieldTouched)(\"userName\")&&r(\"userName\");return s.a.createElement(re.a,{layout:\"inline\",onSubmit:this.handleSubmit},this.state.error?\"\".concat(this.state.error):null,s.a.createElement(oe,{validateStatus:o?\"error\":\"\",help:o||\"\"},a(\"userName\",{rules:[{required:!0,message:\"Please input the username of the person you want to chat with\"}]})(s.a.createElement(ne.a,{mode:\"tags\",style:{width:\"100%\"},placeholder:\"Tags Mode\",onChange:this.handleChange},[]))),s.a.createElement(oe,null,s.a.createElement(se.a,{type:\"primary\",htmlType:\"submit\",disabled:(e=n(),Object.keys(e).some((function(t){return e[t]})))},\"Start a chat\")))}}]),a}(s.a.Component),le=re.a.create()(ce),ie=Object(z.f)(Object(m.b)((function(e){return{token:e.auth.token,username:e.auth.username}}),(function(e){return{closeAddChatPopup:function(){return e({type:\"CLOSE_ADD_CHAT_POPUP\"})},getUserChats:function(t,a){return e(K(t,a))}}}))(le)),ue=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:\"render\",value:function(){return console.log(\"Testing.....\"),s.a.createElement(ae.a,{centered:!0,footer:null,visible:this.props.isVisible,onCancel:this.props.close},s.a.createElement(ie,null))}}]),a}(s.a.Component),me=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),d.addCallbacks(n.props.setMessages.bind(Object(H.a)(n)),n.props.addMessage.bind(Object(H.a)(n))),n}return Object(l.a)(a,[{key:\"componentDidMount\",value:function(){this.props.onTryAutoSignup()}}]),Object(l.a)(a,[{key:\"render\",value:function(){var e=this;return s.a.createElement(R.a,null,s.a.createElement(\"div\",{id:\"frame\"},s.a.createElement($,null),s.a.createElement(\"div\",{className:\"content\"},s.a.createElement(ue,{isVisible:this.props.showAddChatPopup,close:function(){return e.props.closeAddChatPopup()}}),s.a.createElement(te,null),s.a.createElement(W,null))))}}]),a}(s.a.Component),pe=Object(m.b)((function(e){return{showAddChatPopup:e.nav.showAddChatPopup,authenticated:e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem(\"token\"),a=localStorage.getItem(\"username\");if(void 0===t)e(J());else{var n=new Date(localStorage.getItem(\"expirationDate\"));n<=new Date?e(J()):(e(G(a,t)),e(V((n.getTime()-(new Date).getTime())/1e3)))}}))},closeAddChatPopup:function(){return e({type:\"CLOSE_ADD_CHAT_POPUP\"})},addMessage:function(t){return e(function(e){return{type:\"ADD_MESSAGE\",message:e}}(t))},setMessages:function(t){return e(function(e){return{type:\"SET_MESSAGES\",messages:e}}(t))}}}))(me),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d;var de=function(){var e=Object(v.c)({auth:A,nav:N,message:F});return Object(v.e)(e,he(Object(v.a)(b.a)))}(),fe=s.a.createElement(m.a,{store:de},s.a.createElement(pe,null));o.a.render(fe,document.getElementById(\"app\"))}},[[176,1,2]]]);","extractedComments":[]}